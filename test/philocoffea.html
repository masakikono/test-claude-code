<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KONO KAFFE - 千葉県船橋市の本格コーヒー専門店</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;400;500;700&family=Crimson+Text:wght@400;600&family=Playfair+Display:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-navy: #0f172a;
            --secondary-navy: #1e3a8a;
            --dark-navy: #1f2937;
            --light-navy: #334155;
            --primary-black: #000000;
            --secondary-black: #1a1a1a;
            --dark-gray: #374151;
            --light-gray: #d1d5db;
            --accent-gray: #6b7280;
            --off-white: #f8f9fa;
            --cream-white: #f1f5f9;
            --dark-text: #1f2937;
            --light-text: #6b7280;
            --white: #FFFFFF;
            --gold: #D4AF37;
            --silver: #C0C0C0;
            --navy-accent: #3b82f6;
            --coffee-brown: #8B4513;
        }

        body {
            font-family: 'Noto Serif JP', serif;
            line-height: 1.6;
            color: var(--dark-text);
            background-color: var(--white);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Parallax Background */
        .parallax-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--primary-navy), var(--secondary-navy), var(--dark-navy), var(--primary-navy));
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            z-index: -1;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            25% { background-position: 50% 100%; }
            50% { background-position: 100% 50%; }
            75% { background-position: 50% 0%; }
            100% { background-position: 0% 50%; }
        }

        /* Coffee Bean Animations */
        .coffee-beans {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .coffee-bean {
            position: absolute;
            width: 8px;
            height: 12px;
            background: var(--coffee-brown);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: float 20s infinite linear;
            opacity: 0.3;
        }

        .coffee-bean:nth-child(odd) {
            animation-duration: 25s;
        }

        .coffee-bean:nth-child(even) {
            animation-duration: 30s;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Header */
        header {
            background: rgba(15, 23, 42, 0.95);
            color: var(--white);
            padding: 1rem 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            flex-wrap: nowrap;
            position: relative;
        }
        
        .header-content .logo {
            flex: 1;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--white);
            text-decoration: none;
            transition: all 0.3s ease;
            letter-spacing: 3px;
            position: relative;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .logo:hover {
            transform: scale(1.05);
            color: var(--silver);
            text-shadow: 0 0 20px rgba(192, 192, 192, 0.5);
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .menu-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--white);
            margin: 3px 0;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Desktop Navigation Styles */
        .desktop-nav {
            display: none;
            align-items: center;
        }

        .desktop-nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            margin: 0;
            padding: 0;
        }

        .desktop-nav a {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.8rem 1.2rem;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            font-size: 0.95rem;
            white-space: nowrap;
        }

        .desktop-nav a::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--silver), var(--navy-accent));
            transform: translate(-50%, -50%);
            transition: width 0.3s ease;
        }

        .desktop-nav a:hover::before {
            width: 80%;
        }

        .desktop-nav a::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, var(--navy-accent), var(--primary-navy));
            border-radius: 25px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .desktop-nav a:hover::after,
        .desktop-nav a.active::after {
            opacity: 0.2;
        }

        .desktop-nav a.active {
            color: var(--silver);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, 
                rgba(15, 23, 42, 0.98), 
                rgba(30, 58, 138, 0.95), 
                rgba(31, 41, 55, 0.98)
            );
            backdrop-filter: blur(25px);
            border-radius: 0 0 25px 25px;
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-top: none;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.4),
                0 5px 15px rgba(212, 175, 55, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            z-index: 999;
            overflow: hidden;
        }

        .mobile-nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--gold), 
                var(--silver), 
                var(--gold), 
                transparent
            );
        }

        .mobile-nav.active {
            display: block;
            animation: slideDownMobile 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes slideDownMobile {
            0% {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
            }
            50% {
                opacity: 0.8;
                transform: translateY(5px) scale(1.02);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .mobile-nav ul {
            flex-direction: column;
            gap: 0;
            padding: 1.5rem 0;
            margin: 0;
            list-style: none;
        }

        .mobile-nav li {
            position: relative;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            overflow: hidden;
        }

        .mobile-nav li:last-child {
            border-bottom: none;
        }

        .mobile-nav li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(135deg, var(--gold), var(--silver));
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .mobile-nav li:hover::before {
            transform: translateX(0);
        }

        .mobile-nav a {
            display: block;
            padding: 1.4rem 2.5rem;
            border-radius: 0;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--white);
            text-decoration: none;
            transition: all 0.4s ease;
            position: relative;
            background: transparent;
        }

        .mobile-nav a::after {
            content: '→';
            position: absolute;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%) translateX(20px);
            opacity: 0;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            color: var(--gold);
        }

        .mobile-nav a:hover {
            background: linear-gradient(90deg, 
                rgba(212, 175, 55, 0.1), 
                rgba(255, 255, 255, 0.05),
                transparent
            );
            padding-left: 3rem;
            color: var(--silver);
            letter-spacing: 1px;
        }

        .mobile-nav a:hover::after {
            opacity: 1;
            transform: translateY(-50%) translateX(0);
        }

        .mobile-nav a:active {
            transform: scale(0.98);
            background: rgba(212, 175, 55, 0.2);
        }

        /* Header Actions (Cart + Auth) */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Responsive Design for Header */
        @media (max-width: 1024px) {
            .header-content {
                gap: 0.5rem;
            }
            
            .desktop-nav ul {
                gap: 1rem;
            }
            
            .desktop-nav a {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
        }

        /* Responsive adjustments for different screen sizes */
        @media (max-width: 768px) {
            .logo {
                font-size: 1.8rem;
                letter-spacing: 1px;
            }

            .header-actions {
                gap: 0.3rem;
            }

            .cart-container .cart-icon {
                padding: 0.4rem;
                font-size: 1rem;
            }

            .auth-buttons button {
                padding: 0.4rem 0.6rem;
                font-size: 0.75rem;
            }
        }


        /* Hero Section with Parallax */
        .hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--white);
            overflow: hidden;
        }

        .hero-content {
            max-width: 800px;
            z-index: 10;
            position: relative;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 5rem;
            margin-bottom: 1rem;
            letter-spacing: 4px;
            background: linear-gradient(45deg, var(--white), var(--silver), var(--navy-accent));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: textGlow 3s ease-in-out infinite alternate;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }

        @keyframes textGlow {
            0% { text-shadow: 0 0 30px rgba(255, 255, 255, 0.3); }
            100% { text-shadow: 0 0 50px rgba(192, 192, 192, 0.5); }
        }

        .hero p {
            font-size: 1.8rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            animation: fadeInUp 1s ease-out 0.5s both;
        }

        .cta-button {
            background: linear-gradient(45deg, var(--silver), var(--navy-accent));
            color: var(--white);
            padding: 1.5rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
            font-family: 'Noto Serif JP', serif;
            position: relative;
            overflow: hidden;
            transform: translateY(0);
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }

        .cta-button:hover::before {
            left: 100%;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.5);
        }

        /* Steam Animation */
        .steam-container {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 200px;
            pointer-events: none;
        }

        .steam {
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: steam 4s infinite linear;
        }

        .steam:nth-child(1) { left: 20px; animation-delay: 0s; }
        .steam:nth-child(2) { left: 40px; animation-delay: 0.5s; }
        .steam:nth-child(3) { left: 60px; animation-delay: 1s; }
        .steam:nth-child(4) { left: 80px; animation-delay: 1.5s; }

        @keyframes steam {
            0% {
                transform: translateY(100px) scale(1);
                opacity: 0;
            }
            20% {
                opacity: 0.8;
            }
            80% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) scale(1.5);
                opacity: 0;
            }
        }

        /* About Section */
        .about {
            padding: 8rem 0;
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            position: relative;
            overflow: hidden;
        }

        .section-title {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            color: var(--primary-black);
            margin-bottom: 4rem;
            position: relative;
            letter-spacing: 3px;
            opacity: 0;
            transform: translateY(50px);
            animation: slideUpTitle 1s ease-out forwards;
        }

        @keyframes slideUpTitle {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: linear-gradient(90deg, var(--navy-accent), var(--primary-navy));
            animation: expandLine 0.8s ease-out 0.5s both;
        }

        @keyframes expandLine {
            0% { width: 0; }
            100% { width: 120px; }
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .about-text {
            font-size: 1.3rem;
            line-height: 2;
            color: var(--light-text);
            animation: fadeInLeft 1s ease-out 0.3s both;
        }

        .about-text p {
            margin-bottom: 1.5rem;
            position: relative;
            padding-left: 20px;
        }

        .about-text p::before {
            content: '☕';
            position: absolute;
            left: 0;
            color: var(--coffee-brown);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .about-image {
            background: linear-gradient(135deg, var(--primary-navy), var(--secondary-navy));
            height: 500px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.8rem;
            text-align: center;
            box-shadow: 0 20px 40px rgba(15, 23, 42, 0.4);
            position: relative;
            overflow: hidden;
            animation: fadeInRight 1s ease-out 0.3s both;
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .about-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(192, 192, 192, 0.2), transparent);
            transform: translateX(-100%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Coffee Products */
        .coffee-products {
            padding: 8rem 0;
            background: var(--white);
            position: relative;
        }

        /* Product Filters */
        .product-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 3rem 0;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .filter-group, .sort-group {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .filter-group label, .sort-group label {
            font-weight: 600;
            color: var(--primary-black);
            font-family: 'Playfair Display', serif;
        }

        .filter-btn {
            padding: 0.8rem 1.5rem;
            border: 2px solid var(--light-gray);
            background: var(--white);
            color: var(--primary-black);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            font-weight: 500;
        }

        .filter-btn:hover {
            border-color: var(--navy-accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .filter-btn.active {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            border-color: var(--navy-accent);
            color: var(--white);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .sort-select {
            padding: 0.8rem 1rem;
            border: 2px solid var(--light-gray);
            border-radius: 25px;
            background: var(--white);
            color: var(--primary-black);
            font-family: 'Noto Serif JP', serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sort-select:focus {
            outline: none;
            border-color: var(--navy-accent);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 3rem;
            margin-top: 4rem;
        }

        .product-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            position: relative;
            transform: translateY(0);
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-15px) rotateY(5deg);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(192, 192, 192, 0.15), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .product-card:hover::before {
            opacity: 1;
        }

        .product-image {
            height: 250px;
            background: linear-gradient(135deg, var(--primary-navy), var(--dark-navy));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .product-image::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent);
            transform: translate(-50%, -50%);
            transition: all 0.4s ease;
        }

        .product-card:hover .product-image::after {
            width: 300px;
            height: 300px;
        }

        .product-info {
            padding: 2rem;
            position: relative;
        }

        .product-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            color: var(--primary-black);
            margin-bottom: 0.8rem;
            position: relative;
        }

        .product-origin {
            color: var(--light-text);
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }

        .product-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--navy-accent);
            position: relative;
        }

        .product-price::after {
            content: '✨';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: translateY(-50%) scale(0.8); }
            50% { opacity: 1; transform: translateY(-50%) scale(1); }
        }

        /* Contact Section */
        .contact {
            padding: 8rem 0;
            background: linear-gradient(135deg, var(--primary-navy), var(--secondary-navy));
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        .contact::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="white" opacity="0.1"/></svg>');
            background-size: 50px 50px;
            animation: starsMove 20s linear infinite;
        }

        @keyframes starsMove {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(-50px) translateY(-50px); }
        }

        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            position: relative;
            z-index: 10;
        }

        .contact-info h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--silver);
        }

        .contact-info p {
            margin-bottom: 1.2rem;
            font-size: 1.2rem;
            line-height: 1.8;
        }

        .contact-form {
            background: rgba(255, 255, 255, 0.1);
            padding: 3rem;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .form-group {
            margin-bottom: 2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 500;
            color: var(--silver);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            font-family: inherit;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--navy-accent);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Footer */
        footer {
            background: var(--primary-navy);
            color: var(--white);
            text-align: center;
            padding: 3rem 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        /* Enhanced Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }

        .reveal-text {
            opacity: 0;
            transform: translateY(20px);
            animation: revealText 0.8s ease-out forwards;
        }

        @keyframes revealText {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 3rem;
            }
            
            .hero p {
                font-size: 1.4rem;
            }
            
            .about-content {
                grid-template-columns: 1fr;
            }
            
            .contact-content {
                grid-template-columns: 1fr;
            }
            
            nav ul {
                flex-direction: column;
                gap: 1rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Advanced Loading Animation */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--primary-navy), var(--secondary-navy));
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .coffee-loader {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .coffee-cup {
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, var(--white), var(--light-gray));
            border-radius: 0 0 30px 30px;
            position: relative;
            margin: 0 auto;
            animation: fillCup 3s infinite;
        }

        .coffee-cup::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 5px;
            background: var(--light-gray);
            border-radius: 10px;
        }

        .coffee-cup::after {
            content: '';
            position: absolute;
            top: 15px;
            right: -15px;
            width: 20px;
            height: 30px;
            border: 3px solid var(--light-gray);
            border-left: none;
            border-radius: 0 10px 10px 0;
        }

        @keyframes fillCup {
            0% { background: linear-gradient(145deg, var(--white), var(--light-gray)); }
            50% { background: linear-gradient(145deg, var(--coffee-brown), var(--primary-black)); }
            100% { background: linear-gradient(145deg, var(--white), var(--light-gray)); }
        }

        /* Scroll Progress Indicator */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--navy-accent), var(--silver));
            z-index: 9999;
            transition: width 0.1s ease;
        }

        /* Cursor Effects */
        .cursor-dot {
            width: 8px;
            height: 8px;
            background: var(--navy-accent);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
            transition: transform 0.1s ease;
        }

        .cursor-ring {
            width: 40px;
            height: 40px;
            border: 2px solid var(--silver);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9998;
            transition: all 0.1s ease;
        }

        /* Auth Buttons */
        .auth-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .login-btn, .register-btn {
            padding: 0.8rem 1.5rem;
            border: 2px solid var(--silver);
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .login-btn:hover, .register-btn:hover {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .register-btn {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            border-color: var(--navy-accent);
        }

        .register-btn:hover {
            background: linear-gradient(45deg, var(--silver), var(--navy-accent));
            box-shadow: 0 5px 15px rgba(192, 192, 192, 0.4);
        }

        /* Cart Icon Styles */
        .cart-container {
            position: relative;
            margin-left: 1rem;
        }

        .cart-icon {
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--silver);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .cart-icon:hover {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .cart-symbol {
            font-size: 1.5rem;
            filter: brightness(0) invert(1);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(45deg, #dc2626, #ef4444);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .cart-count:empty {
            display: none;
        }

        /* Add to Cart Button */
        .product-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .detail-btn {
            background: var(--primary-black);
            color: var(--white);
            border: 2px solid var(--dark-gray);
            padding: 0.8rem 1.2rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            flex: 1;
            position: relative;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .detail-btn:hover {
            background: linear-gradient(45deg, var(--light-navy), var(--silver));
            border-color: var(--navy-accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(192, 192, 192, 0.3);
        }

        .add-to-cart-btn {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            color: var(--white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            flex: 2;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .add-to-cart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.5);
        }

        .add-to-cart-btn:active {
            transform: translateY(0);
        }

        .add-to-cart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .add-to-cart-btn:hover::before {
            left: 100%;
        }

        .add-to-cart-btn.added {
            background: linear-gradient(45deg, #10b981, #34d399);
            transform: scale(0.95);
        }

        .add-to-cart-btn.added::after {
            content: '✓';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            animation: checkmark 0.5s ease-in-out;
        }

        @keyframes checkmark {
            0% {
                opacity: 0;
                transform: translateY(-50%) scale(0);
            }
            100% {
                opacity: 1;
                transform: translateY(-50%) scale(1);
            }
        }

        /* Cart Modal Styles */
        .cart-modal-content {
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .cart-content {
            max-height: 400px;
            overflow-y: auto;
            margin: 2rem 0;
        }

        .cart-empty {
            text-align: center;
            padding: 3rem;
            color: var(--light-gray);
        }

        .cart-empty p {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .cart-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .cart-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .cart-item-info h4 {
            color: var(--white);
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            font-family: 'Playfair Display', serif;
        }

        .cart-item-info p {
            color: var(--light-gray);
            font-size: 1rem;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .qty-btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.3);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qty-btn:hover:not(:disabled) {
            background: var(--navy-accent);
            border-color: var(--navy-accent);
            transform: scale(1.1);
        }

        .qty-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .qty-display {
            color: var(--white);
            font-size: 1.2rem;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        .remove-btn {
            background: linear-gradient(45deg, #dc2626, #ef4444);
            color: var(--white);
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(220, 38, 38, 0.4);
        }

        .cart-footer {
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 2rem;
            margin-top: 2rem;
        }

        .cart-total-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .cart-total {
            font-size: 1.5rem;
            color: var(--white);
            font-family: 'Playfair Display', serif;
        }

        .cart-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .clear-cart-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border: 2px solid var(--light-gray);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Noto Serif JP', serif;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .clear-cart-btn:hover {
            background: linear-gradient(45deg, #dc2626, #ef4444);
            border-color: #dc2626;
            transform: translateY(-2px);
        }

        .checkout-btn {
            background: linear-gradient(45deg, #10b981, #34d399);
            color: var(--white);
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Noto Serif JP', serif;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.5);
        }

        .checkout-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Responsive Cart Modal */
        @media (max-width: 768px) {
            .cart-modal-content {
                margin: 2% auto;
                width: 95%;
                max-height: 90vh;
            }
            
            .cart-total-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .cart-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .clear-cart-btn,
            .checkout-btn {
                flex: 1;
            }
        }

        /* Product Detail Modal Styles */
        .product-detail-modal {
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .product-detail-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .product-detail-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--white);
            margin-bottom: 0.5rem;
        }

        .product-detail-header .price {
            font-size: 1.8rem;
            color: var(--navy-accent);
            font-weight: bold;
        }

        .product-detail-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .product-image-large {
            background: linear-gradient(135deg, var(--primary-navy), var(--dark-navy));
            height: 300px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.8rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .product-info-detail {
            color: var(--white);
        }

        .product-info-detail h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--silver);
            margin-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 0.5rem;
        }

        .product-info-detail p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .taste-profile {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .taste-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(5px);
        }

        .taste-item .taste-label {
            font-weight: bold;
            color: var(--silver);
            margin-bottom: 0.5rem;
        }

        .taste-level {
            display: flex;
            justify-content: center;
            gap: 0.2rem;
            margin-top: 0.5rem;
        }

        .taste-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
        }

        .taste-dot.active {
            background: var(--navy-accent);
        }

        .brewing-methods {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            backdrop-filter: blur(5px);
        }

        .brewing-methods h4 {
            color: var(--silver);
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .brewing-methods ul {
            list-style: none;
            padding: 0;
        }

        .brewing-methods li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .brewing-methods li:last-child {
            border-bottom: none;
        }

        .brewing-methods li::before {
            content: '☕';
            margin-right: 0.5rem;
        }

        .product-detail-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .detail-add-to-cart {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            color: var(--white);
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .detail-add-to-cart:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.5);
        }

        .back-to-products {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border: 2px solid var(--silver);
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            backdrop-filter: blur(5px);
        }

        .back-to-products:hover {
            background: linear-gradient(45deg, var(--light-navy), var(--silver));
            border-color: var(--navy-accent);
            transform: translateY(-2px);
        }

        /* Responsive Product Detail */
        @media (max-width: 768px) {
            .product-detail-modal {
                margin: 2% auto;
                width: 95%;
                max-height: 95vh;
            }
            
            .product-detail-body {
                grid-template-columns: 1fr;
            }
            
            .product-detail-header h2 {
                font-size: 2rem;
            }
            
            .taste-profile {
                grid-template-columns: 1fr;
            }
            
            .product-detail-actions {
                flex-direction: column;
            }
        }

        /* User Menu */
        .user-menu {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: nowrap;
            min-width: 0;
        }

        .user-name {
            color: var(--silver);
            font-weight: 600;
            font-size: 1.1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
            flex-shrink: 0;
        }

        .mypage-btn, .logout-btn {
            padding: 0.8rem 1.2rem;
            border: 2px solid var(--silver);
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            font-weight: 500;
            backdrop-filter: blur(10px);
            white-space: nowrap;
            flex-shrink: 0;
            font-size: 0.9rem;
        }

        .mypage-btn:hover {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .logout-btn:hover {
            background: linear-gradient(45deg, #dc2626, #ef4444);
            border-color: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 38, 38, 0.4);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--primary-navy), var(--secondary-navy));
            margin: 5% auto;
            padding: 3rem;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .modal-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--white);
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .modal-header p {
            color: var(--light-gray);
            font-size: 1.1rem;
        }

        .close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: var(--white);
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10001;
        }

        .close:hover {
            color: var(--silver);
            transform: scale(1.2);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--silver);
            font-size: 1.1rem;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--navy-accent);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .form-submit {
            background: linear-gradient(45deg, var(--navy-accent), var(--silver));
            color: var(--white);
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Serif JP', serif;
            width: 100%;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        }

        .form-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.5);
        }

        .form-submit:active {
            transform: translateY(0);
        }

        .form-link {
            text-align: center;
            margin-top: 1.5rem;
        }

        .form-link a {
            color: var(--navy-accent);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .form-link a:hover {
            color: var(--silver);
        }

        .error-message {
            color: #ef4444;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .success-message {
            color: #10b981;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        /* Mypage specific styles */
        .user-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .user-info h3 {
            color: var(--silver);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .user-info p {
            color: var(--white);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .user-info strong {
            color: var(--navy-accent);
        }

        /* Responsive Design for Auth */
        @media (max-width: 768px) {
            .auth-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .user-menu {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .user-name {
                max-width: 120px;
                font-size: 1rem;
            }
            
            .mypage-btn, .logout-btn {
                padding: 0.6rem 1rem;
                font-size: 0.8rem;
            }
            
            .modal-content {
                margin: 10% auto;
                padding: 2rem;
            }
            
            .modal-header h2 {
                font-size: 2rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .logo {
                font-size: 2rem;
            }
        }
        
        /* Additional responsive breakpoint for narrow screens */
        @media (max-width: 480px) {
            .user-menu {
                gap: 0.3rem;
            }
            
            .user-name {
                max-width: 100px;
                font-size: 0.9rem;
            }
            
            .mypage-btn, .logout-btn {
                padding: 0.5rem 0.8rem;
                font-size: 0.75rem;
            }
        }

        /* Brewing Guide Section Styles */
        .brewing-guide {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            padding: 5rem 0;
            position: relative;
            overflow: hidden;
        }

        .brewing-guide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="%23f3f4f6" opacity="0.3"/></svg>') repeat;
            background-size: 50px 50px;
            pointer-events: none;
            opacity: 0.5;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.3rem;
            color: var(--light-text);
            margin-bottom: 3rem;
            font-style: italic;
        }

        .brewing-methods {
            position: relative;
            z-index: 1;
        }

        .method-selector {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .method-btn {
            padding: 1rem 2rem;
            background: var(--white);
            border: 2px solid var(--light-gray);
            border-radius: 30px;
            color: var(--dark-text);
            font-family: 'Noto Serif JP', serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .method-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--navy-accent);
        }

        .method-btn.active {
            background: linear-gradient(45deg, var(--primary-navy), var(--navy-accent));
            color: var(--white);
            border-color: var(--primary-navy);
            box-shadow: 0 8px 25px rgba(15, 23, 42, 0.3);
        }

        .method-guide {
            display: none;
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(15, 23, 42, 0.1);
        }

        .method-guide.active {
            display: block;
            animation: fadeInUp 0.6s ease-out;
        }

        .guide-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: start;
        }

        .guide-visual {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            border: 2px solid var(--light-gray);
        }

        .brewing-illustration {
            height: 250px;
            position: relative;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Drip Coffee Illustration */
        .drip-illustration .coffee-dripper {
            position: relative;
            width: 80px;
            height: 80px;
        }

        .dripper-top {
            width: 60px;
            height: 15px;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            border-radius: 50px 50px 10px 10px;
            margin: 0 auto 5px;
        }

        .dripper-body {
            width: 80px;
            height: 60px;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            border-radius: 0 0 50px 50px;
            position: relative;
        }

        .water-drop {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 8px;
            background: linear-gradient(to bottom, #4A90E2, #357ABD);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: dropFall 2s infinite;
        }

        @keyframes dropFall {
            0% { top: 70px; opacity: 1; }
            100% { top: 120px; opacity: 0; }
        }

        .coffee-cup-base {
            position: absolute;
            top: 130px;
            left: 50%;
            transform: translateX(-50%);
        }

        .cup-body {
            width: 60px;
            height: 40px;
            background: linear-gradient(145deg, var(--white), var(--light-gray));
            border-radius: 0 0 30px 30px;
            border: 2px solid var(--accent-gray);
        }

        .coffee-level {
            position: absolute;
            bottom: 2px;
            left: 2px;
            right: 2px;
            height: 0px;
            background: linear-gradient(to top, #3E2723, #5D4037);
            border-radius: 0 0 26px 26px;
            animation: fillCup 4s infinite;
        }

        @keyframes fillCup {
            0% { height: 0px; }
            50% { height: 20px; }
            100% { height: 35px; }
        }

        /* French Press Illustration */
        .french-press {
            position: relative;
            width: 70px;
            height: 120px;
            margin: 0 auto;
        }

        .press-plunger {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 40px;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            border-radius: 4px;
            animation: plungePress 6s infinite;
        }

        @keyframes plungePress {
            0%, 70% { top: -10px; }
            90%, 100% { top: 30px; }
        }

        .press-body {
            width: 70px;
            height: 100px;
            background: linear-gradient(145deg, var(--white), var(--light-gray));
            border: 3px solid var(--accent-gray);
            border-radius: 0 0 35px 35px;
            position: relative;
            overflow: hidden;
        }

        .coffee-grounds {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 25px;
            background: linear-gradient(to top, #3E2723, #5D4037);
            opacity: 0.7;
        }

        .coffee-water {
            position: absolute;
            bottom: 25px;
            width: 100%;
            height: 0px;
            background: linear-gradient(to top, #6D4C41, #8D6E63);
            animation: fillFrenchPress 6s infinite;
        }

        @keyframes fillFrenchPress {
            0% { height: 0px; }
            30% { height: 65px; }
            100% { height: 65px; }
        }

        /* Espresso Machine Illustration */
        .espresso-machine {
            position: relative;
            width: 100px;
            height: 140px;
            margin: 0 auto;
        }

        .machine-body {
            width: 80px;
            height: 60px;
            background: linear-gradient(145deg, #2C3E50, #34495E);
            border-radius: 10px;
            margin: 0 auto;
            position: relative;
        }

        .portafilter {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 20px;
            background: linear-gradient(145deg, #8B4513, #A0522D);
            border-radius: 20px;
        }

        .espresso-stream {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 0px;
            background: linear-gradient(to bottom, #8D6E63, #5D4037);
            animation: espressoExtraction 3s infinite;
        }

        @keyframes espressoExtraction {
            0% { height: 0px; }
            30%, 70% { height: 35px; }
            100% { height: 0px; }
        }

        .espresso-cup {
            position: absolute;
            top: 105px;
            left: 50%;
            transform: translateX(-50%);
            width: 35px;
            height: 25px;
        }

        .espresso-shot {
            width: 35px;
            height: 20px;
            background: linear-gradient(145deg, #3E2723, #2E1A17);
            border-radius: 0 0 17px 17px;
            position: relative;
        }

        .crema {
            position: absolute;
            top: -3px;
            width: 100%;
            height: 0px;
            background: linear-gradient(145deg, #D2B48C, #F4A460);
            border-radius: 17px 17px 0 0;
            animation: cremaDevelopment 3s infinite;
        }

        @keyframes cremaDevelopment {
            0% { height: 0px; }
            50%, 100% { height: 8px; }
        }

        /* V60 Pour Over Illustration */
        .v60-dripper {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
        }

        .dripper-spiral {
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, var(--white), var(--light-gray));
            border: 2px solid var(--accent-gray);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
        }

        .dripper-spiral::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 1px solid var(--light-text);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            opacity: 0.3;
        }

        .coffee-bed {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            height: 35px;
            background: linear-gradient(to bottom, #8D6E63, #5D4037);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        .pour-stream {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 3px;
            height: 0px;
            background: linear-gradient(to bottom, #4A90E2, #357ABD);
            animation: pourMotion 4s infinite;
        }

        @keyframes pourMotion {
            0%, 20% { height: 0px; }
            30%, 60% { height: 25px; }
            80%, 100% { height: 0px; }
        }

        .server-pot {
            position: relative;
            width: 70px;
            height: 50px;
            margin: 0 auto;
        }

        .pot-body {
            width: 70px;
            height: 50px;
            background: linear-gradient(145deg, var(--white), var(--light-gray));
            border: 2px solid var(--accent-gray);
            border-radius: 0 0 35px 35px;
        }

        /* Timer Styles */
        .brewing-timer {
            background: var(--white);
            border-radius: 15px;
            padding: 1.5rem;
            border: 2px solid var(--light-gray);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .timer-display {
            text-align: center;
        }

        .timer-display span {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-navy);
            font-family: 'Playfair Display', serif;
            display: block;
            margin-bottom: 1rem;
        }

        .timer-btn, .timer-reset {
            padding: 0.8rem 1.5rem;
            margin: 0 0.5rem;
            border: 2px solid var(--primary-navy);
            border-radius: 25px;
            background: var(--white);
            color: var(--primary-navy);
            cursor: pointer;
            font-family: 'Noto Serif JP', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .timer-btn:hover, .timer-reset:hover {
            background: var(--primary-navy);
            color: var(--white);
            transform: translateY(-2px);
        }

        .timer-btn.active {
            background: linear-gradient(45deg, #dc2626, #ef4444);
            border-color: #dc2626;
            color: var(--white);
        }

        /* Guide Steps Styles */
        .guide-steps h3 {
            color: var(--primary-navy);
            font-size: 1.8rem;
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
            text-align: center;
        }

        .step-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .step-item {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 15px;
            border-left: 4px solid var(--navy-accent);
            transition: all 0.3s ease;
        }

        .step-item:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .step-number {
            background: linear-gradient(45deg, var(--primary-navy), var(--navy-accent));
            color: var(--white);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .step-content h4 {
            color: var(--primary-navy);
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            font-family: 'Playfair Display', serif;
        }

        .step-content p {
            color: var(--dark-text);
            margin-bottom: 0.8rem;
            line-height: 1.6;
        }

        .step-details {
            background: rgba(59, 130, 246, 0.1);
            padding: 0.8rem;
            border-radius: 8px;
            border-left: 3px solid var(--navy-accent);
        }

        .step-details strong {
            color: var(--navy-accent);
            font-weight: 600;
        }

        /* Brewing Tips Section */
        .brewing-tips {
            margin-top: 4rem;
            background: var(--white);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .brewing-tips h3 {
            text-align: center;
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }

        .tip-item {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 15px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tip-item:hover {
            border-color: var(--navy-accent);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .tip-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .tip-item h4 {
            color: var(--primary-navy);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .tip-item p {
            color: var(--dark-text);
            line-height: 1.6;
        }

        /* Responsive Design for Brewing Guide */
        @media (max-width: 768px) {
            .brewing-guide {
                padding: 3rem 0;
            }
            
            .method-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .method-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .guide-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .brewing-illustration {
                height: 200px;
            }
            
            .tips-grid {
                grid-template-columns: 1fr;
            }
            
            .method-guide {
                padding: 2rem;
            }
            
            .brewing-tips {
                margin-top: 2rem;
                padding: 2rem;
            }
            
            .timer-btn, .timer-reset {
                padding: 0.7rem 1.2rem;
                font-size: 0.8rem;
                margin: 0.2rem;
            }
        }

        /* Tasting Section Styles */
        .tasting-section {
            background: linear-gradient(135deg, var(--off-white), var(--cream-white));
            padding: 5rem 0;
            position: relative;
        }

        .tasting-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-bottom: 4rem;
        }

        /* Flavor Wheel Styles */
        .flavor-wheel-container {
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .flavor-wheel-container h3 {
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .flavor-description {
            color: var(--light-text);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .flavor-wheel {
            width: 350px;
            height: 350px;
            margin: 0 auto 2rem;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-navy), var(--navy-accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: bold;
            font-size: 0.8rem;
            text-align: center;
            z-index: 10;
        }

        .wheel-ring {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .flavor-segment {
            position: absolute;
            width: 100%;
            height: 100%;
            cursor: pointer;
            transition: all 0.3s ease;
            transform-origin: center;
        }

        .flavor-segment::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 175px;
            height: 175px;
            transform: translateX(-50%) rotate(var(--start));
            clip-path: polygon(50% 50%, 50% 0%, 
                            calc(50% + 50% * sin(var(--end) - var(--start))) 
                            calc(50% - 50% * cos(var(--end) - var(--start))));
            transition: all 0.3s ease;
        }

        .inner-ring .flavor-segment::before {
            border-radius: 50%;
        }

        .outer-ring .flavor-segment::before {
            width: 175px;
            height: 175px;
        }

        /* Flavor Categories Colors */
        .fruity::before { background: linear-gradient(135deg, #FF6B9D, #FF8E9B); }
        .floral::before { background: linear-gradient(135deg, #E8A0C0, #F5B0E8); }
        .sweet::before { background: linear-gradient(135deg, #A0522D, #D2B48C); }
        .nutty::before { background: linear-gradient(135deg, #8B4513, #CD853F); }
        .earthy::before { background: linear-gradient(135deg, #556B2F, #9ACD32); }

        /* Specific Flavor Colors */
        .berry::before { background: linear-gradient(135deg, #DC143C, #FF69B4); }
        .citrus::before { background: linear-gradient(135deg, #FFA500, #FFD700); }
        .stone-fruit::before { background: linear-gradient(135deg, #FF7F50, #FFA07A); }
        .jasmine::before { background: linear-gradient(135deg, #F0E68C, #FFFFE0); }
        .rose::before { background: linear-gradient(135deg, #FFB6C1, #FFC0CB); }
        .lavender::before { background: linear-gradient(135deg, #E6E6FA, #DDA0DD); }
        .chocolate::before { background: linear-gradient(135deg, #8B4513, #A0522D); }
        .caramel::before { background: linear-gradient(135deg, #D2B48C, #F4A460); }
        .honey::before { background: linear-gradient(135deg, #DAA520, #FFD700); }
        .almond::before { background: linear-gradient(135deg, #DEB887, #F5DEB3); }
        .hazelnut::before { background: linear-gradient(135deg, #D2691E, #CD853F); }
        .walnut::before { background: linear-gradient(135deg, #8B4513, #A0522D); }
        .woody::before { background: linear-gradient(135deg, #8B4513, #D2691E); }
        .herbal::before { background: linear-gradient(135deg, #6B8E23, #9ACD32); }
        .spicy::before { background: linear-gradient(135deg, #B22222, #DC143C); }

        .flavor-segment:hover::before {
            filter: brightness(1.3) saturate(1.2);
            transform: translateX(-50%) rotate(var(--start)) scale(1.08);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
        }

        .flavor-segment:active::before {
            filter: brightness(1.5) saturate(1.4);
            transform: translateX(-50%) rotate(var(--start)) scale(0.95);
        }

        .flavor-segment.selected::before {
            filter: brightness(1.4) saturate(1.3);
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.6), inset 0 0 15px rgba(255, 255, 255, 0.2);
            border: 2px solid var(--gold);
        }

        @keyframes flavorPulse {
            0% { transform: translateX(-50%) rotate(var(--start)) scale(1); }
            50% { transform: translateX(-50%) rotate(var(--start)) scale(1.1); }
            100% { transform: translateX(-50%) rotate(var(--start)) scale(1); }
        }

        .flavor-label, .flavor-sublabel {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(calc((var(--start) + var(--end)) / 2));
            color: var(--white);
            font-weight: bold;
            font-size: 0.9rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            pointer-events: none;
            white-space: nowrap;
        }

        .flavor-sublabel {
            font-size: 0.7rem;
        }

        .flavor-info {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            padding: 2rem;
            border-radius: 15px;
            border-left: 4px solid var(--navy-accent);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .flavor-detail {
            animation: flavorInfoFadeIn 0.5s ease-out;
        }

        @keyframes flavorInfoFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .flavor-name {
            color: var(--primary-navy);
            margin-bottom: 0.5rem;
            font-size: 1.4rem;
            font-weight: 600;
            font-family: 'Playfair Display', serif;
        }

        .flavor-category {
            display: inline-block;
            background: linear-gradient(90deg, var(--gold), var(--silver));
            color: var(--white);
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .flavor-description {
            color: var(--dark-text);
            line-height: 1.6;
            font-size: 1rem;
            margin-top: 1rem;
        }

        .flavor-info h4 {
            color: var(--primary-navy);
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        /* Tasting Notes Form Styles */
        .tasting-notes-container {
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .tasting-notes-container h3 {
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .tasting-description {
            color: var(--light-text);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .tasting-form {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .coffee-selector select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--light-gray);
            border-radius: 10px;
            background: var(--white);
            font-family: 'Noto Serif JP', serif;
            font-size: 1rem;
            color: var(--dark-text);
        }

        .coffee-selector select:focus {
            outline: none;
            border-color: var(--navy-accent);
        }

        .taste-attributes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .attribute-group label {
            display: block;
            color: var(--primary-navy);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .rating-slider {
            margin-bottom: 1rem;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, var(--light-gray), var(--navy-accent));
            outline: none;
            -webkit-appearance: none;
            margin-bottom: 0.5rem;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--navy-accent);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--navy-accent);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: var(--light-text);
        }

        .slider-labels span:nth-child(2) {
            color: var(--navy-accent);
            font-weight: bold;
            font-size: 1.1rem;
        }

        .selected-flavors {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 10px;
            padding: 1.5rem;
            min-height: 60px;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
        }

        .flavor-tag {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            color: var(--white);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .flavor-tag.fruity { background: linear-gradient(135deg, #FF6B9D, #FF8E9B); }
        .flavor-tag.floral { background: linear-gradient(135deg, #E8A0C0, #F5B0E8); }
        .flavor-tag.sweet { background: linear-gradient(135deg, #A0522D, #D2B48C); }
        .flavor-tag.nutty { background: linear-gradient(135deg, #8B4513, #CD853F); }
        .flavor-tag.earthy { background: linear-gradient(135deg, #556B2F, #9ACD32); }

        .flavor-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .no-flavors {
            color: var(--light-text);
            font-style: italic;
            margin: 0;
        }

        .tasting-notes-text textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 2px solid var(--light-gray);
            border-radius: 10px;
            font-family: 'Noto Serif JP', serif;
            font-size: 1rem;
            color: var(--dark-text);
            resize: vertical;
        }

        .tasting-notes-text textarea:focus {
            outline: none;
            border-color: var(--navy-accent);
        }

        .star-rating {
            display: flex;
            gap: 0.5rem;
            font-size: 2rem;
        }

        .star {
            color: var(--light-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .star:hover,
        .star.active {
            color: #FFD700;
            transform: scale(1.1);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .save-tasting-btn, .clear-form-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-family: 'Noto Serif JP', serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .save-tasting-btn {
            background: linear-gradient(45deg, var(--primary-navy), var(--navy-accent));
            color: var(--white);
        }

        .save-tasting-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(15, 23, 42, 0.3);
        }

        .clear-form-btn {
            background: var(--white);
            color: var(--primary-navy);
            border: 2px solid var(--light-gray);
        }

        .clear-form-btn:hover {
            background: var(--light-gray);
            transform: translateY(-2px);
        }

        /* Saved Notes Section */
        .saved-notes-section {
            margin-top: 4rem;
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .saved-notes-section h3 {
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
            text-align: center;
        }

        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .note-card {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 15px;
            padding: 2rem;
            border-left: 4px solid var(--navy-accent);
            transition: all 0.3s ease;
        }

        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .note-coffee {
            font-weight: bold;
            color: var(--primary-navy);
            font-size: 1.2rem;
        }

        .note-date {
            color: var(--light-text);
            font-size: 0.9rem;
        }

        .note-attributes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .note-attribute {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        .note-flavors {
            margin-bottom: 1rem;
        }

        .note-text {
            color: var(--dark-text);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .note-rating {
            display: flex;
            gap: 0.2rem;
        }

        .no-saved-notes {
            text-align: center;
            color: var(--light-text);
            font-style: italic;
            grid-column: 1 / -1;
        }

        /* Coffee Profiles Section */
        .coffee-profiles-section {
            margin-top: 4rem;
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .coffee-profiles-section h3 {
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
            text-align: center;
        }

        .profiles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .coffee-profile {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 15px;
            padding: 2rem;
            border-top: 4px solid var(--navy-accent);
            transition: all 0.3s ease;
        }

        .coffee-profile:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .coffee-profile h4 {
            color: var(--primary-navy);
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            font-family: 'Playfair Display', serif;
            text-align: center;
        }

        .profile-chart {
            margin-bottom: 1.5rem;
        }

        .profile-attribute {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .profile-attribute span:first-child {
            min-width: 60px;
            color: var(--dark-text);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .profile-bar {
            flex: 1;
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }

        .profile-fill {
            height: 100%;
            background: linear-gradient(to right, var(--navy-accent), var(--primary-navy));
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .profile-attribute span:last-child {
            min-width: 20px;
            color: var(--primary-navy);
            font-weight: bold;
        }

        .profile-flavors {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .profile-description {
            color: var(--dark-text);
            line-height: 1.6;
            font-style: italic;
        }

        /* Responsive Design for Tasting Section */
        @media (max-width: 768px) {
            .tasting-section {
                padding: 3rem 0;
            }
            
            .tasting-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .flavor-wheel {
                width: 280px;
                height: 280px;
            }
            
            .taste-attributes {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .profiles-grid {
                grid-template-columns: 1fr;
            }
            
            .notes-grid {
                grid-template-columns: 1fr;
            }
            
            .flavor-wheel-container,
            .tasting-notes-container {
                padding: 2rem;
            }
        }

        /* Origin Stories Section Styles */
        .origin-stories {
            background: linear-gradient(135deg, var(--primary-navy), var(--dark-navy));
            padding: 5rem 0;
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        .origin-stories::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="80" cy="40" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="40" cy="80" r="1" fill="%23ffffff" opacity="0.1"/></svg>') repeat;
            background-size: 100px 100px;
            pointer-events: none;
        }

        .origin-stories .section-title {
            color: var(--white);
            text-align: center;
            margin-bottom: 1rem;
        }

        .origin-stories .section-subtitle {
            color: var(--silver);
            text-align: center;
            margin-bottom: 4rem;
        }

        /* World Map Styles */
        .world-map-container {
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 4rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .world-map-container h3 {
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
        }

        .coffee-world-map {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto 2rem;
        }

        .map-svg {
            width: 100%;
            height: auto;
            border-radius: 15px;
            background: linear-gradient(135deg, #E8F4FD, #D1E9F6);
            border: 2px solid var(--light-gray);
        }

        .coffee-belt {
            opacity: 0.3;
        }

        .belt-label {
            fill: var(--primary-navy);
            font-size: 14px;
            font-weight: 600;
            font-family: 'Noto Serif JP', serif;
        }

        .origin-marker {
            fill: var(--navy-accent);
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 4px 8px rgba(59, 130, 246, 0.3));
        }

        .origin-marker:hover {
            fill: var(--gold);
            filter: drop-shadow(0 6px 12px rgba(212, 175, 55, 0.4));
        }

        .origin-marker.active {
            fill: var(--gold);
            filter: drop-shadow(0 6px 12px rgba(212, 175, 55, 0.6));
        }

        .origin-label {
            fill: var(--primary-navy);
            font-size: 12px;
            font-weight: 600;
            font-family: 'Noto Serif JP', serif;
            pointer-events: none;
        }

        .map-legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-marker {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--navy-accent);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        /* Country Info Display */
        .country-info-display {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 4rem;
            color: var(--dark-text);
            text-align: center;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .country-info-display h3 {
            color: var(--primary-navy);
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        /* Origin Stories Grid */
        .origin-stories-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 4rem;
            margin-bottom: 4rem;
        }

        .origin-story {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 3rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 3rem;
            align-items: start;
            transition: all 0.3s ease;
        }

        .origin-story:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.08);
        }

        .story-image {
            position: relative;
        }

        .image-placeholder {
            width: 100%;
            height: 200px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            position: relative;
            overflow: hidden;
        }

        .ethiopia-bg {
            background: linear-gradient(135deg, #FF6B9D, #FF8E9B, #FFB085);
        }

        .colombia-bg {
            background: linear-gradient(135deg, #A0522D, #D2B48C, #F4A460);
        }

        .rwanda-bg {
            background: linear-gradient(135deg, #E8A0C0, #F5B0E8, #DDA0DD);
        }

        .country-flag {
            z-index: 2;
            position: relative;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .story-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .story-header h3 {
            color: var(--white);
            font-size: 2rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .story-meta {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .story-meta span {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .story-text p {
            color: var(--light-gray);
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .farm-details h4 {
            color: var(--gold);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .detail-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid var(--navy-accent);
        }

        .detail-item strong {
            color: var(--silver);
            display: block;
            margin-bottom: 0.5rem;
        }

        .detail-item span {
            color: var(--white);
        }

        .sustainability-info h4 {
            color: var(--gold);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
        }

        .sustainability-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .tag {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tag.organic { background: linear-gradient(135deg, #10b981, #34d399); }
        .tag.fair-trade { background: linear-gradient(135deg, #f59e0b, #fbbf24); }
        .tag.bird-friendly { background: linear-gradient(135deg, #3b82f6, #60a5fa); }
        .tag.rainforest { background: linear-gradient(135deg, #059669, #10b981); }
        .tag.women { background: linear-gradient(135deg, #ec4899, #f472b6); }
        .tag.community { background: linear-gradient(135deg, #8b5cf6, #a78bfa); }

        .sustainability-info p {
            color: var(--light-gray);
            line-height: 1.6;
        }

        /* Processing Methods Section */
        .processing-methods-section {
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 4rem;
            color: var(--dark-text);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .processing-methods-section h3 {
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
            font-family: 'Playfair Display', serif;
        }

        .processing-intro {
            text-align: center;
            color: var(--light-text);
            margin-bottom: 3rem;
            font-size: 1.1rem;
        }

        .processing-methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .processing-method {
            background: linear-gradient(135deg, var(--cream-white), var(--off-white));
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            border-top: 4px solid var(--navy-accent);
            transition: all 0.3s ease;
        }

        .processing-method:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .method-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .processing-method h4 {
            color: var(--primary-navy);
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            font-family: 'Playfair Display', serif;
        }

        .method-process {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .process-step {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.8rem;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 10px;
            border-left: 3px solid var(--navy-accent);
        }

        .step-number {
            background: var(--navy-accent);
            color: var(--white);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .method-characteristics,
        .method-countries {
            text-align: left;
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border-left: 3px solid var(--gold);
        }

        .method-characteristics strong,
        .method-countries strong {
            color: var(--primary-navy);
        }

        /* Seasonal Calendar Section */
        .seasonal-calendar-section {
            background: var(--white);
            border-radius: 20px;
            padding: 3rem;
            color: var(--dark-text);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .seasonal-calendar-section h3 {
            color: var(--primary-navy);
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
            font-family: 'Playfair Display', serif;
        }

        .calendar-intro {
            text-align: center;
            color: var(--light-text);
            margin-bottom: 3rem;
            font-size: 1.1rem;
        }

        .harvest-calendar {
            max-width: 1000px;
            margin: 0 auto;
        }

        .calendar-month-grid {
            display: grid;
            grid-template-columns: 120px repeat(12, 1fr);
            gap: 1px;
            background: var(--light-gray);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .month-header {
            background: var(--primary-navy);
            color: var(--white);
            padding: 1rem 0.5rem;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .country-row {
            display: contents;
        }

        .country-name {
            background: var(--cream-white);
            padding: 1rem;
            display: flex;
            align-items: center;
            font-weight: 600;
            color: var(--primary-navy);
            border-right: 2px solid var(--light-gray);
        }

        .harvest-bar {
            background: var(--navy-accent);
            margin: 0.5rem;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }

        .calendar-legend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
        }

        .legend-bar {
            width: 30px;
            height: 8px;
            background: linear-gradient(135deg, var(--navy-accent), var(--primary-navy));
            border-radius: 4px;
        }

        .legend-note {
            color: var(--light-text);
            font-size: 0.9rem;
            font-style: italic;
        }

        /* Responsive Design for Origin Stories */
        @media (max-width: 768px) {
            .origin-stories {
                padding: 3rem 0;
            }
            
            .origin-story {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 2rem;
            }
            
            .image-placeholder {
                height: 150px;
            }
            
            .story-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .processing-methods-grid {
                grid-template-columns: 1fr;
            }
            
            .calendar-month-grid {
                grid-template-columns: 80px repeat(12, 1fr);
                font-size: 0.8rem;
            }
            
            .month-header {
                padding: 0.8rem 0.3rem;
                font-size: 0.7rem;
            }
            
            .country-name {
                padding: 0.8rem 0.5rem;
                font-size: 0.8rem;
            }
            
            .world-map-container {
                padding: 2rem;
            }
            
            .processing-methods-section,
            .seasonal-calendar-section {
                padding: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="coffee-loader">
            <div class="coffee-cup"></div>
        </div>
    </div>

    <!-- Parallax Background -->
    <div class="parallax-bg"></div>

    <!-- Scroll Progress Indicator -->
    <div class="scroll-progress" id="scroll-progress"></div>

    <!-- Custom Cursor -->
    <div class="cursor-dot" id="cursor-dot"></div>
    <div class="cursor-ring" id="cursor-ring"></div>

    <!-- Coffee Bean Animations -->
    <div class="coffee-beans" id="coffee-beans"></div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#home" class="logo">KONO KAFFE</a>
                
                <!-- Mobile Menu Toggle -->
                <div class="menu-toggle" id="menuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="desktop-nav">
                    <ul>
                        <li><a href="#home">ホーム</a></li>
                        <li><a href="#about">私たちについて</a></li>
                        <li><a href="#brewing">抽出ガイド</a></li>
                        <li><a href="#tasting">テイスティング</a></li>
                        <li><a href="#origins">産地ストーリー</a></li>
                        <li><a href="#coffee">コーヒー</a></li>
                        <li><a href="#contact">お問い合わせ</a></li>
                    </ul>
                </nav>
                
                <!-- Mobile Navigation -->
                <div class="mobile-nav" id="mobileNav">
                    <ul>
                        <li><a href="#home" onclick="closeMobileMenu()">ホーム</a></li>
                        <li><a href="#about" onclick="closeMobileMenu()">私たちについて</a></li>
                        <li><a href="#brewing" onclick="closeMobileMenu()">抽出ガイド</a></li>
                        <li><a href="#tasting" onclick="closeMobileMenu()">テイスティング</a></li>
                        <li><a href="#origins" onclick="closeMobileMenu()">産地ストーリー</a></li>
                        <li><a href="#coffee" onclick="closeMobileMenu()">コーヒー</a></li>
                        <li><a href="#contact" onclick="closeMobileMenu()">お問い合わせ</a></li>
                    </ul>
                </div>
                
                <div class="header-actions">
                    <div class="cart-container">
                        <div class="cart-icon" onclick="openCartModal()">
                            <span class="cart-symbol">🛒</span>
                            <span class="cart-count" id="cartCount">0</span>
                        </div>
                    </div>
                    <div class="auth-buttons" id="authButtons">
                        <button class="login-btn" onclick="openLoginModal()">ログイン</button>
                        <button class="register-btn" onclick="openRegisterModal()">新規登録</button>
                    </div>
                </div>
                <div class="user-menu" id="userMenu" style="display: none;">
                    <span class="user-name" id="userName">○○さん</span>
                    <button class="mypage-btn" onclick="openMypageModal()">マイページ</button>
                    <button class="logout-btn" onclick="logout()">ログアウト</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>KONO KAFFE</h1>
            <p>千葉県船橋市の本格コーヒー専門店<br>最高品質のスペシャルティコーヒーをお届けします</p>
            <a href="#coffee" class="cta-button">コーヒーを探す</a>
        </div>
        <div class="steam-container">
            <div class="steam"></div>
            <div class="steam"></div>
            <div class="steam"></div>
            <div class="steam"></div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <h2 class="section-title">私たちについて</h2>
            <div class="about-content">
                <div class="about-text">
                    <p>KONO KAFFEは、千葉県船橋市に拠点を置く、こだわりのスペシャルティコーヒー専門店です。</p>
                    <p>世界各地の最高品質のコーヒー豆を厳選し、丁寧に焙煎してお届けしています。エチオピア、コロンビア、ルワンダなど、様々な産地の個性豊かなコーヒーをご用意しております。</p>
                    <p>私たちは単なるコーヒーの販売ではなく、コーヒーの文化と知識を共有し、お客様に最高のコーヒー体験を提供することを使命としています。</p>
                </div>
                <div class="about-image">
                    <div>
                        <h3>コーヒーへの情熱</h3>
                        <p>品質にこだわり抜いた<br>スペシャルティコーヒー</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Brewing Guide Section -->
    <section class="brewing-guide" id="brewing">
        <div class="container">
            <h2 class="section-title">コーヒー抽出ガイド</h2>
            <p class="section-subtitle">プロの技を学んで、ご自宅で最高の一杯を</p>
            
            <div class="brewing-methods">
                <div class="method-selector">
                    <button class="method-btn active" data-method="drip">ドリップ</button>
                    <button class="method-btn" data-method="french">フレンチプレス</button>
                    <button class="method-btn" data-method="espresso">エスプレッソ</button>
                    <button class="method-btn" data-method="pour-over">ハンドドリップ</button>
                </div>

                <!-- Drip Method -->
                <div class="method-guide active" id="drip-guide">
                    <div class="guide-content">
                        <div class="guide-visual">
                            <div class="brewing-illustration drip-illustration">
                                <div class="coffee-dripper">
                                    <div class="dripper-top"></div>
                                    <div class="dripper-body"></div>
                                    <div class="water-drop" id="waterDrop"></div>
                                </div>
                                <div class="coffee-cup-base">
                                    <div class="cup-body"></div>
                                    <div class="coffee-level" id="coffeeLevel"></div>
                                </div>
                            </div>
                            <div class="brewing-timer">
                                <div class="timer-display">
                                    <span id="timer">00:00</span>
                                    <button class="timer-btn" onclick="toggleTimer('drip')">スタート</button>
                                    <button class="timer-reset" onclick="resetTimer()">リセット</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="guide-steps">
                            <h3>ドリップコーヒーの淹れ方</h3>
                            <div class="step-list">
                                <div class="step-item" data-step="1">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4>フィルターをセット</h4>
                                        <p>コーヒーフィルターをドリッパーにセットし、お湯で軽く湿らせます</p>
                                        <div class="step-details">
                                            <strong>Point:</strong> フィルターの匂いを除去し、ドリッパーを温めます
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item" data-step="2">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4>コーヒー粉を入れる</h4>
                                        <p>中挽きのコーヒー粉を20g入れ、平らにならします</p>
                                        <div class="step-details">
                                            <strong>比率:</strong> コーヒー粉 20g : お湯 300ml (1:15)
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item" data-step="3">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4>蒸らし (30秒)</h4>
                                        <p>90-95℃のお湯を50ml注いで30秒蒸らします</p>
                                        <div class="step-details">
                                            <strong>目安:</strong> コーヒー粉がプクプクと膨らんできたらOK
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item" data-step="4">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h4>抽出 (2-3分)</h4>
                                        <p>残りのお湯を3回に分けてゆっくり注ぎます</p>
                                        <div class="step-details">
                                            <strong>Total time:</strong> 3-4分で抽出完了
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- French Press Method -->
                <div class="method-guide" id="french-guide">
                    <div class="guide-content">
                        <div class="guide-visual">
                            <div class="brewing-illustration french-illustration">
                                <div class="french-press">
                                    <div class="press-plunger" id="frenchPlunger"></div>
                                    <div class="press-body">
                                        <div class="coffee-grounds"></div>
                                        <div class="coffee-water" id="frenchWater"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="brewing-timer">
                                <div class="timer-display">
                                    <span id="timer-french">04:00</span>
                                    <button class="timer-btn" onclick="toggleTimer('french')">スタート</button>
                                    <button class="timer-reset" onclick="resetTimer()">リセット</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="guide-steps">
                            <h3>フレンチプレスの淹れ方</h3>
                            <div class="step-list">
                                <div class="step-item">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4>粗挽きのコーヒー粉を入れる</h4>
                                        <p>30gの粗挽きコーヒー粉をプレスに入れます</p>
                                        <div class="step-details">
                                            <strong>比率:</strong> コーヒー粉 30g : お湯 500ml (1:16.7)
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4>お湯を注ぐ</h4>
                                        <p>93-96℃のお湯500mlを一気に注ぎます</p>
                                        <div class="step-details">
                                            <strong>Point:</strong> コーヒー粉全体にお湯が行き渡るように
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4>4分間浸漬</h4>
                                        <p>プランジャーは下げずに4分間待ちます</p>
                                        <div class="step-details">
                                            <strong>重要:</strong> 時間を正確に測ることがポイント
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h4>プランジャーを押す</h4>
                                        <p>ゆっくりと均等な力でプランジャーを下げます</p>
                                        <div class="step-details">
                                            <strong>注意:</strong> 急激に押すと苦味が出ます
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Espresso Method -->
                <div class="method-guide" id="espresso-guide">
                    <div class="guide-content">
                        <div class="guide-visual">
                            <div class="brewing-illustration espresso-illustration">
                                <div class="espresso-machine">
                                    <div class="machine-body"></div>
                                    <div class="portafilter"></div>
                                    <div class="espresso-stream" id="espressoStream"></div>
                                    <div class="espresso-cup">
                                        <div class="crema" id="espressoCrema"></div>
                                        <div class="espresso-shot" id="espressoShot"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="brewing-timer">
                                <div class="timer-display">
                                    <span id="timer-espresso">00:25</span>
                                    <button class="timer-btn" onclick="toggleTimer('espresso')">スタート</button>
                                    <button class="timer-reset" onclick="resetTimer()">リセット</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="guide-steps">
                            <h3>エスプレッソの淹れ方</h3>
                            <div class="step-list">
                                <div class="step-item">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4>グラインド</h4>
                                        <p>極細挽きのコーヒー粉18-20gを準備</p>
                                        <div class="step-details">
                                            <strong>重要:</strong> 挽いてすぐに使用することが必須
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4>タンピング</h4>
                                        <p>ポルタフィルターに粉を入れ、30lbsの力でタンピング</p>
                                        <div class="step-details">
                                            <strong>Point:</strong> 水平で均一に圧縮すること
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4>抽出</h4>
                                        <p>9バールの圧力で25-30秒かけて抽出</p>
                                        <div class="step-details">
                                            <strong>目標:</strong> 30ml（ダブルショット60ml）
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h4>クレマの確認</h4>
                                        <p>表面に美しいクレマが浮かんでいれば成功</p>
                                        <div class="step-details">
                                            <strong>品質指標:</strong> クレマの色と持続性
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pour Over Method -->
                <div class="method-guide" id="pour-over-guide">
                    <div class="guide-content">
                        <div class="guide-visual">
                            <div class="brewing-illustration pour-over-illustration">
                                <div class="v60-dripper">
                                    <div class="dripper-spiral"></div>
                                    <div class="coffee-bed"></div>
                                    <div class="pour-stream" id="pourStream"></div>
                                </div>
                                <div class="server-pot">
                                    <div class="pot-body"></div>
                                    <div class="coffee-level" id="pourCoffeeLevel"></div>
                                </div>
                            </div>
                            <div class="brewing-timer">
                                <div class="timer-display">
                                    <span id="timer-pour">02:30</span>
                                    <button class="timer-btn" onclick="toggleTimer('pour')">スタート</button>
                                    <button class="timer-reset" onclick="resetTimer()">リセット</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="guide-steps">
                            <h3>V60ハンドドリップの淹れ方</h3>
                            <div class="step-list">
                                <div class="step-item">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4>フィルターリンス</h4>
                                        <p>V60フィルターをセットし、お湯でリンス</p>
                                        <div class="step-details">
                                            <strong>目的:</strong> ペーパー臭の除去とドリッパーの予熱
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4>コーヒー粉をセット</h4>
                                        <p>中細挽きのコーヒー粉22gを入れ、中央を少し凹ませる</p>
                                        <div class="step-details">
                                            <strong>比率:</strong> 1:15 (粉22g : お湯330ml)
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4>第1注 - ブルーミング</h4>
                                        <p>中央から外側に向けて44mlを30秒で注ぐ</p>
                                        <div class="step-details">
                                            <strong>Point:</strong> コーヒー粉の2倍の重量のお湯
                                        </div>
                                    </div>
                                </div>
                                <div class="step-item">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h4>第2-4注で完成</h4>
                                        <p>残り286mlを3回に分けて注ぎ、2分30秒で完成</p>
                                        <div class="step-details">
                                            <strong>総時間:</strong> 2分30秒〜3分以内
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tips Section -->
            <div class="brewing-tips">
                <h3>抽出のコツ</h3>
                <div class="tips-grid">
                    <div class="tip-item">
                        <div class="tip-icon">🌡️</div>
                        <h4>水温管理</h4>
                        <p>浅煎り: 93-96℃<br>深煎り: 88-92℃</p>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">⚖️</div>
                        <h4>正確な計量</h4>
                        <p>デジタルスケールで<br>粉とお湯を正確に計量</p>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">💧</div>
                        <h4>水質</h4>
                        <p>軟水を使用<br>TDS値: 150-300ppm</p>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">⏱️</div>
                        <h4>挽き時期</h4>
                        <p>抽出直前に<br>豆を挽くのがベスト</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tasting Notes & Flavor Wheel Section -->
    <section class="tasting-section" id="tasting">
        <div class="container">
            <h2 class="section-title">コーヒーテイスティング</h2>
            <p class="section-subtitle">味覚を磨いて、コーヒーの奥深い世界を探求しましょう</p>
            
            <div class="tasting-content">
                <!-- Flavor Wheel -->
                <div class="flavor-wheel-container">
                    <h3>フレーバーホイール</h3>
                    <p class="flavor-description">コーヒーの味わいを表現する言葉を学び、あなたの味覚体験を豊かにしましょう</p>
                    
                    <div class="flavor-wheel" id="flavorWheel">
                        <div class="wheel-center">
                            <span>COFFEE<br>FLAVORS</span>
                        </div>
                        
                        <!-- Inner Ring - Main Categories -->
                        <div class="wheel-ring inner-ring">
                            <div class="flavor-segment fruity" data-category="fruity" style="--start: 0deg; --end: 72deg;">
                                <span class="flavor-label">フルーティー</span>
                            </div>
                            <div class="flavor-segment floral" data-category="floral" style="--start: 72deg; --end: 144deg;">
                                <span class="flavor-label">フローラル</span>
                            </div>
                            <div class="flavor-segment sweet" data-category="sweet" style="--start: 144deg; --end: 216deg;">
                                <span class="flavor-label">甘い</span>
                            </div>
                            <div class="flavor-segment nutty" data-category="nutty" style="--start: 216deg; --end: 288deg;">
                                <span class="flavor-label">ナッティー</span>
                            </div>
                            <div class="flavor-segment earthy" data-category="earthy" style="--start: 288deg; --end: 360deg;">
                                <span class="flavor-label">アーシー</span>
                            </div>
                        </div>
                        
                        <!-- Outer Ring - Specific Flavors -->
                        <div class="wheel-ring outer-ring">
                            <!-- Fruity subcategories -->
                            <div class="flavor-segment berry" data-flavor="berry" style="--start: 0deg; --end: 24deg;">
                                <span class="flavor-sublabel">ベリー</span>
                            </div>
                            <div class="flavor-segment citrus" data-flavor="citrus" style="--start: 24deg; --end: 48deg;">
                                <span class="flavor-sublabel">柑橘</span>
                            </div>
                            <div class="flavor-segment stone-fruit" data-flavor="stone-fruit" style="--start: 48deg; --end: 72deg;">
                                <span class="flavor-sublabel">核果類</span>
                            </div>
                            
                            <!-- Floral subcategories -->
                            <div class="flavor-segment jasmine" data-flavor="jasmine" style="--start: 72deg; --end: 96deg;">
                                <span class="flavor-sublabel">ジャスミン</span>
                            </div>
                            <div class="flavor-segment rose" data-flavor="rose" style="--start: 96deg; --end: 120deg;">
                                <span class="flavor-sublabel">ローズ</span>
                            </div>
                            <div class="flavor-segment lavender" data-flavor="lavender" style="--start: 120deg; --end: 144deg;">
                                <span class="flavor-sublabel">ラベンダー</span>
                            </div>
                            
                            <!-- Sweet subcategories -->
                            <div class="flavor-segment chocolate" data-flavor="chocolate" style="--start: 144deg; --end: 168deg;">
                                <span class="flavor-sublabel">チョコレート</span>
                            </div>
                            <div class="flavor-segment caramel" data-flavor="caramel" style="--start: 168deg; --end: 192deg;">
                                <span class="flavor-sublabel">キャラメル</span>
                            </div>
                            <div class="flavor-segment honey" data-flavor="honey" style="--start: 192deg; --end: 216deg;">
                                <span class="flavor-sublabel">ハニー</span>
                            </div>
                            
                            <!-- Nutty subcategories -->
                            <div class="flavor-segment almond" data-flavor="almond" style="--start: 216deg; --end: 240deg;">
                                <span class="flavor-sublabel">アーモンド</span>
                            </div>
                            <div class="flavor-segment hazelnut" data-flavor="hazelnut" style="--start: 240deg; --end: 264deg;">
                                <span class="flavor-sublabel">ヘーゼルナッツ</span>
                            </div>
                            <div class="flavor-segment walnut" data-flavor="walnut" style="--start: 264deg; --end: 288deg;">
                                <span class="flavor-sublabel">ウォルナッツ</span>
                            </div>
                            
                            <!-- Earthy subcategories -->
                            <div class="flavor-segment woody" data-flavor="woody" style="--start: 288deg; --end: 312deg;">
                                <span class="flavor-sublabel">ウッディー</span>
                            </div>
                            <div class="flavor-segment herbal" data-flavor="herbal" style="--start: 312deg; --end: 336deg;">
                                <span class="flavor-sublabel">ハーバル</span>
                            </div>
                            <div class="flavor-segment spicy" data-flavor="spicy" style="--start: 336deg; --end: 360deg;">
                                <span class="flavor-sublabel">スパイシー</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flavor-info" id="flavorInfo">
                        <h4>フレーバーを選択してください</h4>
                        <p>ホイール上のフレーバーをクリックすると、詳細な説明が表示されます。</p>
                    </div>
                </div>

                <!-- Tasting Notes Form -->
                <div class="tasting-notes-container">
                    <h3>テイスティングノート</h3>
                    <p class="tasting-description">あなたの味覚体験を記録しましょう</p>
                    
                    <div class="tasting-form">
                        <div class="coffee-selector">
                            <label for="coffee-select">コーヒー選択:</label>
                            <select id="coffee-select">
                                <option value="">コーヒーを選択してください</option>
                                <option value="ethiopia">エチオピア イルガチェフェ</option>
                                <option value="colombia">コロンビア ウイラ</option>
                                <option value="rwanda">ルワンダ ムサンゼ</option>
                                <option value="brazil">ブラジル セラード</option>
                                <option value="guatemala">グアテマラ アンティグア</option>
                                <option value="kenya">ケニア AA</option>
                            </select>
                        </div>

                        <div class="taste-attributes">
                            <div class="attribute-group">
                                <label>酸味:</label>
                                <div class="rating-slider">
                                    <input type="range" id="acidity" min="1" max="10" value="5" class="slider">
                                    <div class="slider-labels">
                                        <span>弱い</span>
                                        <span id="acidity-value">5</span>
                                        <span>強い</span>
                                    </div>
                                </div>
                            </div>

                            <div class="attribute-group">
                                <label>苦味:</label>
                                <div class="rating-slider">
                                    <input type="range" id="bitterness" min="1" max="10" value="5" class="slider">
                                    <div class="slider-labels">
                                        <span>弱い</span>
                                        <span id="bitterness-value">5</span>
                                        <span>強い</span>
                                    </div>
                                </div>
                            </div>

                            <div class="attribute-group">
                                <label>甘み:</label>
                                <div class="rating-slider">
                                    <input type="range" id="sweetness" min="1" max="10" value="5" class="slider">
                                    <div class="slider-labels">
                                        <span>弱い</span>
                                        <span id="sweetness-value">5</span>
                                        <span>強い</span>
                                    </div>
                                </div>
                            </div>

                            <div class="attribute-group">
                                <label>ボディ:</label>
                                <div class="rating-slider">
                                    <input type="range" id="body" min="1" max="10" value="5" class="slider">
                                    <div class="slider-labels">
                                        <span>ライト</span>
                                        <span id="body-value">5</span>
                                        <span>フル</span>
                                    </div>
                                </div>
                            </div>

                            <div class="attribute-group">
                                <label>香り:</label>
                                <div class="rating-slider">
                                    <input type="range" id="aroma" min="1" max="10" value="5" class="slider">
                                    <div class="slider-labels">
                                        <span>弱い</span>
                                        <span id="aroma-value">5</span>
                                        <span>強い</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flavor-selection">
                            <label>検出されたフレーバー:</label>
                            <div class="selected-flavors" id="selectedFlavors">
                                <p class="no-flavors">フレーバーホイールからフレーバーを選択してください</p>
                            </div>
                        </div>

                        <div class="tasting-notes-text">
                            <label for="notes">テイスティングノート:</label>
                            <textarea id="notes" placeholder="コーヒーの印象、感想、特記事項などを記録してください..."></textarea>
                        </div>

                        <div class="rating-overall">
                            <label>総合評価:</label>
                            <div class="star-rating" id="starRating">
                                <span class="star" data-rating="1">★</span>
                                <span class="star" data-rating="2">★</span>
                                <span class="star" data-rating="3">★</span>
                                <span class="star" data-rating="4">★</span>
                                <span class="star" data-rating="5">★</span>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="save-tasting-btn" onclick="saveTastingNote()">テイスティングノートを保存</button>
                            <button type="button" class="clear-form-btn" onclick="clearTastingForm()">フォームクリア</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Saved Tasting Notes -->
            <div class="saved-notes-section">
                <h3>保存されたテイスティングノート</h3>
                <div class="notes-grid" id="savedNotes">
                    <p class="no-saved-notes">まだ保存されたテイスティングノートはありません。</p>
                </div>
            </div>

            <!-- Coffee Profiles -->
            <div class="coffee-profiles-section">
                <h3>商品別テイスティングプロファイル</h3>
                <div class="profiles-grid">
                    <div class="coffee-profile" data-coffee="ethiopia">
                        <h4>エチオピア イルガチェフェ</h4>
                        <div class="profile-chart">
                            <div class="profile-attribute">
                                <span>酸味</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 90%;"></div>
                                </div>
                                <span>9</span>
                            </div>
                            <div class="profile-attribute">
                                <span>苦味</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 30%;"></div>
                                </div>
                                <span>3</span>
                            </div>
                            <div class="profile-attribute">
                                <span>甘み</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 70%;"></div>
                                </div>
                                <span>7</span>
                            </div>
                            <div class="profile-attribute">
                                <span>ボディ</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 50%;"></div>
                                </div>
                                <span>5</span>
                            </div>
                        </div>
                        <div class="profile-flavors">
                            <span class="flavor-tag fruity">ベリー</span>
                            <span class="flavor-tag floral">フローラル</span>
                            <span class="flavor-tag fruity">柑橘</span>
                        </div>
                        <p class="profile-description">明るい酸味とベリーのような果実味が特徴。ジャスミンのような花の香りも感じられます。</p>
                    </div>

                    <div class="coffee-profile" data-coffee="colombia">
                        <h4>コロンビア ウイラ</h4>
                        <div class="profile-chart">
                            <div class="profile-attribute">
                                <span>酸味</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 60%;"></div>
                                </div>
                                <span>6</span>
                            </div>
                            <div class="profile-attribute">
                                <span>苦味</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 50%;"></div>
                                </div>
                                <span>5</span>
                            </div>
                            <div class="profile-attribute">
                                <span>甘み</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 80%;"></div>
                                </div>
                                <span>8</span>
                            </div>
                            <div class="profile-attribute">
                                <span>ボディ</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 70%;"></div>
                                </div>
                                <span>7</span>
                            </div>
                        </div>
                        <div class="profile-flavors">
                            <span class="flavor-tag sweet">チョコレート</span>
                            <span class="flavor-tag sweet">キャラメル</span>
                            <span class="flavor-tag nutty">ナッツ</span>
                        </div>
                        <p class="profile-description">バランスの良い味わいで、チョコレートとキャラメルの甘い香りが印象的。</p>
                    </div>

                    <div class="coffee-profile" data-coffee="rwanda">
                        <h4>ルワンダ ムサンゼ</h4>
                        <div class="profile-chart">
                            <div class="profile-attribute">
                                <span>酸味</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 80%;"></div>
                                </div>
                                <span>8</span>
                            </div>
                            <div class="profile-attribute">
                                <span>苦味</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 40%;"></div>
                                </div>
                                <span>4</span>
                            </div>
                            <div class="profile-attribute">
                                <span>甘み</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 75%;"></div>
                                </div>
                                <span>7.5</span>
                            </div>
                            <div class="profile-attribute">
                                <span>ボディ</span>
                                <div class="profile-bar">
                                    <div class="profile-fill" style="width: 60%;"></div>
                                </div>
                                <span>6</span>
                            </div>
                        </div>
                        <div class="profile-flavors">
                            <span class="flavor-tag fruity">赤いベリー</span>
                            <span class="flavor-tag floral">ローズ</span>
                            <span class="flavor-tag sweet">ハニー</span>
                        </div>
                        <p class="profile-description">エレガントな酸味と赤いベリーの風味。ローズヒップのような上品な香り。</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Origin Stories & Farm Information Section -->
    <section class="origin-stories" id="origins">
        <div class="container">
            <h2 class="section-title">産地ストーリー</h2>
            <p class="section-subtitle">世界のコーヒー産地を旅して、農園と生産者の物語を知る</p>
            
            <!-- Interactive World Map -->
            <div class="world-map-container">
                <h3>コーヒーベルト - 世界のコーヒー産地</h3>
                <div class="coffee-world-map" id="coffeeWorldMap">
                    <svg viewBox="0 0 1000 500" class="map-svg">
                        <!-- Coffee Belt Background -->
                        <rect x="0" y="150" width="1000" height="200" fill="rgba(139, 69, 19, 0.1)" class="coffee-belt"/>
                        <text x="500" y="140" text-anchor="middle" class="belt-label">コーヒーベルト（北緯25度〜南緯25度）</text>
                        
                        <!-- Country Regions (Simplified) -->
                        <!-- Ethiopia -->
                        <circle cx="580" cy="280" r="20" class="origin-marker" data-country="ethiopia">
                            <animate attributeName="r" values="20;25;20" dur="2s" repeatCount="indefinite"/>
                        </circle>
                        <text x="580" y="320" text-anchor="middle" class="origin-label">エチオピア</text>
                        
                        <!-- Colombia -->
                        <circle cx="250" cy="280" r="20" class="origin-marker" data-country="colombia">
                            <animate attributeName="r" values="20;25;20" dur="2.5s" repeatCount="indefinite"/>
                        </circle>
                        <text x="250" y="320" text-anchor="middle" class="origin-label">コロンビア</text>
                        
                        <!-- Rwanda -->
                        <circle cx="560" cy="300" r="18" class="origin-marker" data-country="rwanda">
                            <animate attributeName="r" values="18;23;18" dur="3s" repeatCount="indefinite"/>
                        </circle>
                        <text x="560" y="340" text-anchor="middle" class="origin-label">ルワンダ</text>
                        
                        <!-- Brazil -->
                        <circle cx="320" cy="320" r="22" class="origin-marker" data-country="brazil">
                            <animate attributeName="r" values="22;27;22" dur="2.2s" repeatCount="indefinite"/>
                        </circle>
                        <text x="320" y="360" text-anchor="middle" class="origin-label">ブラジル</text>
                        
                        <!-- Guatemala -->
                        <circle cx="200" cy="240" r="19" class="origin-marker" data-country="guatemala">
                            <animate attributeName="r" values="19;24;19" dur="2.8s" repeatCount="indefinite"/>
                        </circle>
                        <text x="200" y="280" text-anchor="middle" class="origin-label">グアテマラ</text>
                        
                        <!-- Kenya -->
                        <circle cx="600" cy="300" r="21" class="origin-marker" data-country="kenya">
                            <animate attributeName="r" values="21;26;21" dur="2.3s" repeatCount="indefinite"/>
                        </circle>
                        <text x="600" y="340" text-anchor="middle" class="origin-label">ケニア</text>
                    </svg>
                </div>
                
                <div class="map-legend">
                    <div class="legend-item">
                        <div class="legend-marker"></div>
                        <span>クリックして詳細を表示</span>
                    </div>
                </div>
            </div>

            <!-- Country Information Display -->
            <div class="country-info-display" id="countryInfoDisplay">
                <div class="default-info">
                    <h3>産地を選択してください</h3>
                    <p>地図上のマーカーをクリックすると、その産地の詳細情報が表示されます。</p>
                </div>
            </div>

            <!-- Origin Stories Grid -->
            <div class="origin-stories-grid">
                <!-- Ethiopia Story -->
                <article class="origin-story" data-country="ethiopia">
                    <div class="story-image">
                        <div class="image-placeholder ethiopia-bg">
                            <span class="country-flag">🇪🇹</span>
                        </div>
                    </div>
                    <div class="story-content">
                        <div class="story-header">
                            <h3>エチオピア - コーヒー発祥の地</h3>
                            <div class="story-meta">
                                <span class="altitude">標高: 1,500-2,200m</span>
                                <span class="process">精製: ナチュラル・ウォッシュド</span>
                            </div>
                        </div>
                        
                        <div class="story-text">
                            <p>コーヒーの発祥地とされるエチオピア。伝説では、羊飼いのカルディが踊る山羊を見て、赤い実を発見したのが始まりとされています。</p>
                            
                            <p>イルガチェフェ地域は、エチオピア南部の高地に位置し、火山性土壌と理想的な気候条件により、世界最高品質のコーヒーを生産しています。</p>
                        </div>
                        
                        <div class="farm-details">
                            <h4>🏔️ 農園情報</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <strong>地域:</strong>
                                    <span>イルガチェフェ</span>
                                </div>
                                <div class="detail-item">
                                    <strong>品種:</strong>
                                    <span>エチオピア在来種</span>
                                </div>
                                <div class="detail-item">
                                    <strong>収穫期:</strong>
                                    <span>10月-1月</span>
                                </div>
                                <div class="detail-item">
                                    <strong>生産者:</strong>
                                    <span>小規模農家組合</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="sustainability-info">
                            <h4>🌱 持続可能性</h4>
                            <div class="sustainability-tags">
                                <span class="tag organic">オーガニック認証</span>
                                <span class="tag fair-trade">フェアトレード</span>
                                <span class="tag bird-friendly">バードフレンドリー</span>
                            </div>
                            <p>環境に配慮した栽培方法で、野鳥の住処を守りながら高品質なコーヒーを生産しています。</p>
                        </div>
                    </div>
                </article>

                <!-- Colombia Story -->
                <article class="origin-story" data-country="colombia">
                    <div class="story-image">
                        <div class="image-placeholder colombia-bg">
                            <span class="country-flag">🇨🇴</span>
                        </div>
                    </div>
                    <div class="story-content">
                        <div class="story-header">
                            <h3>コロンビア - アンデス山脈の宝石</h3>
                            <div class="story-meta">
                                <span class="altitude">標高: 1,200-2,000m</span>
                                <span class="process">精製: ウォッシュド</span>
                            </div>
                        </div>
                        
                        <div class="story-text">
                            <p>南米コロンビアのウイラ県は、アンデス山脈の雄大な自然に囲まれた美しいコーヒー産地です。昼夜の寒暖差が大きく、火山性土壌が豊富なこの地域は、コーヒー栽培に理想的な環境を提供しています。</p>
                            
                            <p>家族経営の小規模農園が多く、代々受け継がれた伝統的な栽培方法と現代の技術を融合し、品質の高いコーヒーを生産しています。</p>
                        </div>
                        
                        <div class="farm-details">
                            <h4>🏔️ 農園情報</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <strong>地域:</strong>
                                    <span>ウイラ県</span>
                                </div>
                                <div class="detail-item">
                                    <strong>品種:</strong>
                                    <span>カツーラ、コロンビア</span>
                                </div>
                                <div class="detail-item">
                                    <strong>収穫期:</strong>
                                    <span>4月-6月、10月-12月</span>
                                </div>
                                <div class="detail-item">
                                    <strong>生産者:</strong>
                                    <span>ファミリーファーム</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="sustainability-info">
                            <h4>🌱 持続可能性</h4>
                            <div class="sustainability-tags">
                                <span class="tag rainforest">レインフォレスト認証</span>
                                <span class="tag fair-trade">フェアトレード</span>
                                <span class="tag women">女性支援プログラム</span>
                            </div>
                            <p>女性生産者の支援と環境保護を重視し、次世代に美しい自然を残す取り組みを行っています。</p>
                        </div>
                    </div>
                </article>

                <!-- Rwanda Story -->
                <article class="origin-story" data-country="rwanda">
                    <div class="story-image">
                        <div class="image-placeholder rwanda-bg">
                            <span class="country-flag">🇷🇼</span>
                        </div>
                    </div>
                    <div class="story-content">
                        <div class="story-header">
                            <h3>ルワンダ - 千の丘の復活</h3>
                            <div class="story-meta">
                                <span class="altitude">標高: 1,700-2,000m</span>
                                <span class="process">精製: ウォッシュド</span>
                            </div>
                        </div>
                        
                        <div class="story-text">
                            <p>「千の丘の国」と呼ばれるルワンダ。1990年代の困難な時代を乗り越え、コーヒー産業の再建と品質向上に取り組んできました。</p>
                            
                            <p>ムサンゼ地域の女性生産者協同組合では、品質の向上と地域社会の発展を目指し、一粒一粒丁寧に手摘みで収穫されたコーヒーチェリーを、伝統的な水洗処理で丁寧に精製しています。</p>
                        </div>
                        
                        <div class="farm-details">
                            <h4>🏔️ 農園情報</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <strong>地域:</strong>
                                    <span>ムサンゼ</span>
                                </div>
                                <div class="detail-item">
                                    <strong>品種:</strong>
                                    <span>ブルボン</span>
                                </div>
                                <div class="detail-item">
                                    <strong>収穫期:</strong>
                                    <span>3月-7月</span>
                                </div>
                                <div class="detail-item">
                                    <strong>生産者:</strong>
                                    <span>女性生産者協同組合</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="sustainability-info">
                            <h4>🌱 持続可能性</h4>
                            <div class="sustainability-tags">
                                <span class="tag organic">オーガニック栽培</span>
                                <span class="tag fair-trade">フェアトレード</span>
                                <span class="tag community">コミュニティ支援</span>
                            </div>
                            <p>女性の社会参加促進と教育支援を通じて、持続可能なコミュニティづくりに貢献しています。</p>
                        </div>
                    </div>
                </article>
            </div>

            <!-- Processing Methods Section -->
            <div class="processing-methods-section">
                <h3>精製方法の違い</h3>
                <p class="processing-intro">コーヒーの味わいは、産地だけでなく精製方法によっても大きく変わります。</p>
                
                <div class="processing-methods-grid">
                    <div class="processing-method">
                        <div class="method-icon">🌊</div>
                        <h4>ウォッシュド（水洗式）</h4>
                        <div class="method-process">
                            <div class="process-step">
                                <span class="step-number">1</span>
                                <span>果肉除去</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">2</span>
                                <span>発酵槽で12-48時間</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">3</span>
                                <span>水洗い</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">4</span>
                                <span>天日乾燥</span>
                            </div>
                        </div>
                        <div class="method-characteristics">
                            <strong>特徴:</strong> クリーンで明るい酸味、豆本来の風味が際立つ
                        </div>
                        <div class="method-countries">
                            <strong>主な産地:</strong> コロンビア、ルワンダ、ケニア
                        </div>
                    </div>

                    <div class="processing-method">
                        <div class="method-icon">☀️</div>
                        <h4>ナチュラル（自然乾燥式）</h4>
                        <div class="method-process">
                            <div class="process-step">
                                <span class="step-number">1</span>
                                <span>チェリーのまま選別</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">2</span>
                                <span>天日で2-4週間乾燥</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">3</span>
                                <span>果肉・パーチメント除去</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">4</span>
                                <span>生豆の完成</span>
                            </div>
                        </div>
                        <div class="method-characteristics">
                            <strong>特徴:</strong> フルーティーで甘みが強い、ボディが豊か
                        </div>
                        <div class="method-countries">
                            <strong>主な産地:</strong> エチオピア、ブラジル、イエメン
                        </div>
                    </div>

                    <div class="processing-method">
                        <div class="method-icon">🍯</div>
                        <h4>ハニープロセス</h4>
                        <div class="method-process">
                            <div class="process-step">
                                <span class="step-number">1</span>
                                <span>果肉除去（ミューシレージ残す）</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">2</span>
                                <span>ミューシレージ付きで乾燥</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">3</span>
                                <span>定期的な撹拌</span>
                            </div>
                            <div class="process-step">
                                <span class="step-number">4</span>
                                <span>パーチメント除去</span>
                            </div>
                        </div>
                        <div class="method-characteristics">
                            <strong>特徴:</strong> ウォッシュドとナチュラルの中間、甘みと酸味のバランス
                        </div>
                        <div class="method-countries">
                            <strong>主な産地:</strong> コスタリカ、ブラジル、エルサルバドル
                        </div>
                    </div>
                </div>
            </div>

            <!-- Seasonal Coffee Calendar -->
            <div class="seasonal-calendar-section">
                <h3>収穫カレンダー</h3>
                <p class="calendar-intro">世界各地のコーヒーは、それぞれ異なる時期に収穫されます。新鮮なコーヒーをお楽しみいただくための収穫スケジュールです。</p>
                
                <div class="harvest-calendar">
                    <div class="calendar-month-grid">
                        <div class="month-header">1月</div>
                        <div class="month-header">2月</div>
                        <div class="month-header">3月</div>
                        <div class="month-header">4月</div>
                        <div class="month-header">5月</div>
                        <div class="month-header">6月</div>
                        <div class="month-header">7月</div>
                        <div class="month-header">8月</div>
                        <div class="month-header">9月</div>
                        <div class="month-header">10月</div>
                        <div class="month-header">11月</div>
                        <div class="month-header">12月</div>
                        
                        <!-- Ethiopia -->
                        <div class="country-row" data-country="ethiopia">
                            <div class="country-name">エチオピア</div>
                            <div class="harvest-bar" style="grid-column: 10 / 13; background: linear-gradient(135deg, #FF6B9D, #FF8E9B);"></div>
                        </div>
                        
                        <!-- Colombia -->
                        <div class="country-row" data-country="colombia">
                            <div class="country-name">コロンビア</div>
                            <div class="harvest-bar" style="grid-column: 4 / 7; background: linear-gradient(135deg, #A0522D, #D2B48C);"></div>
                            <div class="harvest-bar" style="grid-column: 10 / 13; background: linear-gradient(135deg, #A0522D, #D2B48C);"></div>
                        </div>
                        
                        <!-- Rwanda -->
                        <div class="country-row" data-country="rwanda">
                            <div class="country-name">ルワンダ</div>
                            <div class="harvest-bar" style="grid-column: 3 / 8; background: linear-gradient(135deg, #E8A0C0, #F5B0E8);"></div>
                        </div>
                        
                        <!-- Brazil -->
                        <div class="country-row" data-country="brazil">
                            <div class="country-name">ブラジル</div>
                            <div class="harvest-bar" style="grid-column: 5 / 10; background: linear-gradient(135deg, #8B4513, #CD853F);"></div>
                        </div>
                        
                        <!-- Guatemala -->
                        <div class="country-row" data-country="guatemala">
                            <div class="country-name">グアテマラ</div>
                            <div class="harvest-bar" style="grid-column: 12 / 15; background: linear-gradient(135deg, #556B2F, #9ACD32);"></div>
                        </div>
                        
                        <!-- Kenya -->
                        <div class="country-row" data-country="kenya">
                            <div class="country-name">ケニア</div>
                            <div class="harvest-bar" style="grid-column: 10 / 13; background: linear-gradient(135deg, #DC143C, #FF69B4);"></div>
                        </div>
                    </div>
                    
                    <div class="calendar-legend">
                        <div class="legend-item">
                            <div class="legend-bar"></div>
                            <span>収穫期間</span>
                        </div>
                        <div class="legend-note">
                            * 気候や農園により収穫時期は前後することがあります
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Coffee Products -->
    <section class="coffee-products" id="coffee">
        <div class="container">
            <h2 class="section-title">厳選コーヒー</h2>
            
            <!-- Product Filters -->
            <div class="product-filters">
                <div class="filter-group">
                    <label>焙煎度で絞り込み:</label>
                    <button class="filter-btn active" data-filter="all">全て</button>
                    <button class="filter-btn" data-filter="light">ライト</button>
                    <button class="filter-btn" data-filter="medium">ミディアム</button>
                    <button class="filter-btn" data-filter="dark">ダーク</button>
                </div>
                <div class="sort-group">
                    <label>並び替え:</label>
                    <select class="sort-select" id="sortSelect">
                        <option value="default">デフォルト</option>
                        <option value="price-low">価格: 安い順</option>
                        <option value="price-high">価格: 高い順</option>
                        <option value="name">名前順</option>
                    </select>
                </div>
            </div>
            
            <div class="product-grid">
                <div class="product-card" data-roast="light" data-price="1200" data-name="エチオピア イルガチェフェ">
                    <div class="product-image">
                        <div>エチオピア<br>イルガチェフェ</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">エチオピア イルガチェフェ</h3>
                        <p class="product-origin">産地：エチオピア | 焙煎：ライト</p>
                        <p class="product-price">¥1,200</p>
                        <div class="product-buttons">
                            <button class="detail-btn" onclick="showProductDetail('ethiopia')">豆の詳細</button>
                            <button class="add-to-cart-btn" onclick="addToCart(this)" data-name="エチオピア イルガチェフェ" data-price="1200" data-image="エチオピアイルガチェフェ">カートに追加</button>
                        </div>
                    </div>
                </div>
                <div class="product-card" data-roast="medium" data-price="1080" data-name="コロンビア ウイラ">
                    <div class="product-image">
                        <div>コロンビア<br>ウイラ</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">コロンビア ウイラ</h3>
                        <p class="product-origin">産地：コロンビア | 焙煎：ミディアム</p>
                        <p class="product-price">¥1,080</p>
                        <div class="product-buttons">
                            <button class="detail-btn" onclick="showProductDetail('colombia')">豆の詳細</button>
                            <button class="add-to-cart-btn" onclick="addToCart(this)" data-name="コロンビア ウイラ" data-price="1080" data-image="コロンビアウイラ">カートに追加</button>
                        </div>
                    </div>
                </div>
                <div class="product-card" data-roast="light" data-price="1350" data-name="ルワンダ ムサンゼ">
                    <div class="product-image">
                        <div>ルワンダ<br>ムサンゼ</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">ルワンダ ムサンゼ</h3>
                        <p class="product-origin">産地：ルワンダ | 焙煎：ライト</p>
                        <p class="product-price">¥1,350</p>
                        <div class="product-buttons">
                            <button class="detail-btn" onclick="showProductDetail('rwanda')">豆の詳細</button>
                            <button class="add-to-cart-btn" onclick="addToCart(this)" data-name="ルワンダ ムサンゼ" data-price="1350" data-image="ルワンダムサンゼ">カートに追加</button>
                        </div>
                    </div>
                </div>
                <div class="product-card" data-roast="dark" data-price="950" data-name="ブラジル セラード">
                    <div class="product-image">
                        <div>ブラジル<br>セラード</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">ブラジル セラード</h3>
                        <p class="product-origin">産地：ブラジル | 焙煎：ダーク</p>
                        <p class="product-price">¥950</p>
                        <div class="product-buttons">
                            <button class="detail-btn" onclick="showProductDetail('brazil')">豆の詳細</button>
                            <button class="add-to-cart-btn" onclick="addToCart(this)" data-name="ブラジル セラード" data-price="950" data-image="ブラジルセラード">カートに追加</button>
                        </div>
                    </div>
                </div>
                <div class="product-card" data-roast="medium" data-price="1180" data-name="グアテマラ アンティグア">
                    <div class="product-image">
                        <div>グアテマラ<br>アンティグア</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">グアテマラ アンティグア</h3>
                        <p class="product-origin">産地：グアテマラ | 焙煎：ミディアム</p>
                        <p class="product-price">¥1,180</p>
                        <div class="product-buttons">
                            <button class="detail-btn" onclick="showProductDetail('guatemala')">豆の詳細</button>
                            <button class="add-to-cart-btn" onclick="addToCart(this)" data-name="グアテマラ アンティグア" data-price="1180" data-image="グアテマラアンティグア">カートに追加</button>
                        </div>
                    </div>
                </div>
                <div class="product-card" data-roast="medium" data-price="1450" data-name="ケニア AA">
                    <div class="product-image">
                        <div>ケニア<br>AA</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">ケニア AA</h3>
                        <p class="product-origin">産地：ケニア | 焙煎：ミディアム</p>
                        <p class="product-price">¥1,450</p>
                        <div class="product-buttons">
                            <button class="detail-btn" onclick="showProductDetail('kenya')">豆の詳細</button>
                            <button class="add-to-cart-btn" onclick="addToCart(this)" data-name="ケニア AA" data-price="1450" data-image="ケニアAA">カートに追加</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title">お問い合わせ</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <h3>店舗情報</h3>
                    <p><strong>住所:</strong> 千葉県船橋市</p>
                    <p><strong>電話:</strong> 047-460-9400</p>
                    <p><strong>営業時間:</strong> 10:00 - 17:00</p>
                    <p><strong>定休日:</strong> 不定休</p>
                    <p>最高品質のコーヒーについてのご質問や、卸売りのご相談など、お気軽にお問い合わせください。</p>
                </div>
                <form class="contact-form">
                    <div class="form-group">
                        <label for="name">お名前</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">メールアドレス</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="message">お問い合わせ内容</label>
                        <textarea id="message" name="message" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="cta-button">送信する</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2024 KONO KAFFE. All rights reserved.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <div class="modal-header">
                <h2>ログイン</h2>
                <p>アカウントにログインしてください</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">メールアドレス</label>
                    <input type="email" id="loginEmail" name="email" placeholder="example@email.com" required>
                    <div class="error-message" id="loginEmailError"></div>
                </div>
                <div class="form-group">
                    <label for="loginPassword">パスワード</label>
                    <input type="password" id="loginPassword" name="password" placeholder="パスワードを入力" required>
                    <div class="error-message" id="loginPasswordError"></div>
                </div>
                <button type="submit" class="form-submit">ログイン</button>
                <div class="form-link">
                    <a href="#" onclick="switchToRegister()">新規登録はこちら</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <div class="modal-header">
                <h2>新規登録</h2>
                <p>アカウントを作成してください</p>
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">お名前</label>
                    <input type="text" id="registerName" name="name" placeholder="山田太郎" required>
                    <div class="error-message" id="registerNameError"></div>
                </div>
                <div class="form-group">
                    <label for="registerEmail">メールアドレス</label>
                    <input type="email" id="registerEmail" name="email" placeholder="example@email.com" required>
                    <div class="error-message" id="registerEmailError"></div>
                </div>
                <div class="form-group">
                    <label for="registerPassword">パスワード</label>
                    <input type="password" id="registerPassword" name="password" placeholder="8文字以上で入力" required>
                    <div class="error-message" id="registerPasswordError"></div>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">パスワード確認</label>
                    <input type="password" id="registerConfirmPassword" name="confirmPassword" placeholder="パスワードを再入力" required>
                    <div class="error-message" id="registerConfirmPasswordError"></div>
                </div>
                <button type="submit" class="form-submit">新規登録</button>
                <div class="form-link">
                    <a href="#" onclick="switchToLogin()">既にアカウントをお持ちの方</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Mypage Modal -->
    <div id="mypageModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('mypageModal')">&times;</span>
            <div class="modal-header">
                <h2>マイページ</h2>
                <p>アカウント情報</p>
            </div>
            <div class="user-info">
                <h3>会員情報</h3>
                <p><strong>お名前:</strong> <span id="mypageName"></span></p>
                <p><strong>メールアドレス:</strong> <span id="mypageEmail"></span></p>
                <p><strong>登録日:</strong> <span id="mypageRegistered"></span></p>
            </div>
            <button class="form-submit" onclick="logout()" style="background: linear-gradient(45deg, #dc2626, #ef4444);">ログアウト</button>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content cart-modal-content">
            <span class="close" onclick="closeModal('cartModal')">&times;</span>
            <div class="modal-header">
                <h2>🛒 ショッピングカート</h2>
                <p>選んだ商品を確認してください</p>
            </div>
            
            <div class="cart-content">
                <div id="cartEmpty" class="cart-empty">
                    <p>カートが空です</p>
                    <p>お気に入りのコーヒーを選んでください</p>
                </div>
                
                <div id="cartItems" class="cart-items">
                    <!-- Cart items will be populated here -->
                </div>
            </div>
            
            <div class="cart-footer">
                <div class="cart-total-section">
                    <div class="cart-total">
                        <strong>合計: <span id="cartTotal">¥0</span></strong>
                    </div>
                    <div class="cart-actions">
                        <button class="clear-cart-btn" onclick="clearCart()">カートを空にする</button>
                        <button class="checkout-btn" onclick="checkout()">注文する</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div id="productDetailModal" class="modal">
        <div class="modal-content product-detail-modal">
            <span class="close" onclick="closeModal('productDetailModal')">&times;</span>
            <div id="productDetailContent">
                <!-- Product detail content will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Enhanced Loading Screen
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('loading').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loading').style.display = 'none';
                    // Initialize all animations after loading
                    initializeAnimations();
                }, 500);
            }, 2000);
        });

        // Initialize all animations
        function initializeAnimations() {
            createCoffeeBeans();
            initializeParallax();
            initializeCursor();
            initializeScrollProgress();
            initializeTextReveal();
        }

        // Create floating coffee beans
        function createCoffeeBeans() {
            const coffeeBeansContainer = document.getElementById('coffee-beans');
            const numberOfBeans = 15;
            
            for (let i = 0; i < numberOfBeans; i++) {
                const bean = document.createElement('div');
                bean.className = 'coffee-bean';
                bean.style.left = Math.random() * 100 + '%';
                bean.style.animationDelay = Math.random() * 20 + 's';
                bean.style.animationDuration = (20 + Math.random() * 15) + 's';
                coffeeBeansContainer.appendChild(bean);
            }
        }

        // Advanced Parallax Effects
        function initializeParallax() {
            const parallaxBg = document.querySelector('.parallax-bg');
            
            window.addEventListener('scroll', function() {
                const scrolled = window.pageYOffset;
                const rate = scrolled * -0.5;
                
                if (parallaxBg) {
                    parallaxBg.style.transform = `translateY(${rate}px)`;
                }
                
                // Parallax effect for hero content
                const heroContent = document.querySelector('.hero-content');
                if (heroContent) {
                    heroContent.style.transform = `translateY(${scrolled * 0.3}px)`;
                }
            });
        }

        // Custom Cursor Effects
        function initializeCursor() {
            const cursorDot = document.getElementById('cursor-dot');
            const cursorRing = document.getElementById('cursor-ring');
            
            let mouseX = 0;
            let mouseY = 0;
            let cursorX = 0;
            let cursorY = 0;
            let ringX = 0;
            let ringY = 0;
            
            document.addEventListener('mousemove', function(e) {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            function animateCursor() {
                cursorX += (mouseX - cursorX) * 0.9;
                cursorY += (mouseY - cursorY) * 0.9;
                ringX += (mouseX - ringX) * 0.1;
                ringY += (mouseY - ringY) * 0.1;
                
                cursorDot.style.left = cursorX + 'px';
                cursorDot.style.top = cursorY + 'px';
                cursorRing.style.left = ringX + 'px';
                cursorRing.style.top = ringY + 'px';
                
                requestAnimationFrame(animateCursor);
            }
            
            animateCursor();
            
            // Cursor hover effects
            document.querySelectorAll('a, .product-card, .cta-button').forEach(element => {
                element.addEventListener('mouseenter', function() {
                    cursorDot.style.transform = 'scale(2)';
                    cursorRing.style.transform = 'scale(1.5)';
                });
                
                element.addEventListener('mouseleave', function() {
                    cursorDot.style.transform = 'scale(1)';
                    cursorRing.style.transform = 'scale(1)';
                });
            });
        }

        // Scroll Progress Indicator
        function initializeScrollProgress() {
            const scrollProgress = document.getElementById('scroll-progress');
            
            window.addEventListener('scroll', function() {
                const scrollTop = window.pageYOffset;
                const documentHeight = document.documentElement.scrollHeight - window.innerHeight;
                const progress = (scrollTop / documentHeight) * 100;
                
                scrollProgress.style.width = progress + '%';
            });
        }

        // Text Reveal Animation
        function initializeTextReveal() {
            const textElements = document.querySelectorAll('.about-text p, .contact-info p');
            
            textElements.forEach((element, index) => {
                element.style.animationDelay = (index * 0.2) + 's';
                element.classList.add('reveal-text');
            });
        }

        // Smooth scrolling for navigation links with header offset
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const target = document.querySelector(targetId);
                
                if (target) {
                    // Get header height for offset calculation
                    const header = document.querySelector('header');
                    const headerHeight = header.offsetHeight;
                    
                    // Special handling for home section (hero)
                    if (targetId === '#home') {
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    } else {
                        // Calculate target position minus header height
                        const targetPosition = target.offsetTop - headerHeight - 30; // Extra 30px padding
                        
                        // Smooth scroll to adjusted position
                        window.scrollTo({
                            top: Math.max(0, targetPosition), // Ensure we don't scroll to negative position
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });

        // Enhanced Header Scroll Effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            const scrolled = window.pageYOffset;
            
            if (scrolled > 100) {
                header.style.background = 'rgba(15, 23, 42, 0.98)';
                header.style.backdropFilter = 'blur(15px)';
                header.style.boxShadow = '0 10px 30px rgba(15, 23, 42, 0.3)';
            } else {
                header.style.background = 'rgba(15, 23, 42, 0.95)';
                header.style.backdropFilter = 'blur(10px)';
                header.style.boxShadow = 'none';
            }
        });

        // Advanced Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                    
                    // Add staggered animation to product cards
                    if (entry.target.classList.contains('product-card')) {
                        const cards = entry.target.parentElement.querySelectorAll('.product-card');
                        cards.forEach((card, index) => {
                            setTimeout(() => {
                                card.style.animationDelay = (index * 0.1) + 's';
                                card.classList.add('fade-in');
                            }, index * 100);
                        });
                    }
                }
            });
        }, observerOptions);

        // Observe all sections and product cards
        document.querySelectorAll('section, .product-card').forEach(element => {
            observer.observe(element);
        });

        // Contact form submission with animation
        document.querySelector('.contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Add sending animation
            const submitBtn = this.querySelector('.cta-button');
            const originalText = submitBtn.textContent;
            
            submitBtn.textContent = '送信中...';
            submitBtn.style.background = 'linear-gradient(45deg, #666, #999)';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                submitBtn.textContent = '送信完了 ✓';
                submitBtn.style.background = 'linear-gradient(45deg, #4CAF50, #66BB6A)';
                
                setTimeout(() => {
                    alert('お問い合わせありがとうございます。後日ご連絡いたします。');
                    this.reset();
                    submitBtn.textContent = originalText;
                    submitBtn.style.background = 'linear-gradient(45deg, var(--silver), var(--navy-accent))';
                    submitBtn.disabled = false;
                }, 1000);
            }, 1500);
        });

        // Enhanced Product Card Hover Effects
        document.querySelectorAll('.product-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-15px) rotateY(5deg) scale(1.02)';
                this.style.boxShadow = '0 25px 50px rgba(0, 0, 0, 0.2)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) rotateY(0) scale(1)';
                this.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.1)';
            });
        });

        // Scroll-triggered animations for sections
        const sections = document.querySelectorAll('section');
        sections.forEach(section => {
            section.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.01)';
                this.style.transition = 'transform 0.3s ease';
            });
            
            section.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
            });
        });

        // Add dynamic page transitions
        document.addEventListener('DOMContentLoaded', function() {
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 1s ease';
            
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
        });

        // Navbar link active state with header offset
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('nav a');
            const header = document.querySelector('header');
            const headerHeight = header.offsetHeight;
            const scrollPosition = window.pageYOffset;
            
            let currentSection = 'home'; // Default to home
            
            // Special handling for home section
            if (scrollPosition < headerHeight) {
                currentSection = 'home';
            } else {
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    const sectionId = section.getAttribute('id');
                    
                    // Skip home section in this loop since we handle it above
                    if (sectionId !== 'home') {
                        // Adjust for header height + additional offset
                        if (scrollPosition >= sectionTop - headerHeight - 50) {
                            currentSection = sectionId;
                        }
                    }
                });
            }
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + currentSection) {
                    link.classList.add('active');
                }
            });
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowDown') {
                window.scrollBy(0, 300);
            } else if (e.key === 'ArrowUp') {
                window.scrollBy(0, -300);
            }
        });

        // Performance optimization - throttle scroll events
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            };
        }

        // Apply throttling to scroll events
        window.addEventListener('scroll', throttle(function() {
            // Additional optimized scroll effects can be added here
        }, 16));

        // Product Filtering and Sorting
        function initializeProductFiltering() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            const sortSelect = document.getElementById('sortSelect');
            const productCards = document.querySelectorAll('.product-card');
            
            // Filter functionality
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    const filterValue = this.getAttribute('data-filter');
                    
                    productCards.forEach(card => {
                        const roastType = card.getAttribute('data-roast');
                        
                        if (filterValue === 'all' || roastType === filterValue) {
                            card.style.display = 'block';
                            card.style.animation = 'fadeInUp 0.6s ease-out';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
            
            // Sort functionality
            sortSelect.addEventListener('change', function() {
                const sortValue = this.value;
                const productGrid = document.querySelector('.product-grid');
                const cardsArray = Array.from(productCards);
                
                cardsArray.sort((a, b) => {
                    switch(sortValue) {
                        case 'price-low':
                            return parseInt(a.getAttribute('data-price')) - parseInt(b.getAttribute('data-price'));
                        case 'price-high':
                            return parseInt(b.getAttribute('data-price')) - parseInt(a.getAttribute('data-price'));
                        case 'name':
                            return a.getAttribute('data-name').localeCompare(b.getAttribute('data-name'));
                        default:
                            return 0;
                    }
                });
                
                // Clear the grid and re-append sorted cards
                productGrid.innerHTML = '';
                cardsArray.forEach((card, index) => {
                    card.style.animationDelay = (index * 0.1) + 's';
                    card.style.animation = 'fadeInUp 0.6s ease-out';
                    productGrid.appendChild(card);
                });
            });
        }

        // Initialize navigation and product filtering after DOM content is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeProductFiltering();
            initializeNavigation();
        });

        // Initialize navigation active state
        function initializeNavigation() {
            // Set initial active state based on current scroll position
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('nav a');
            const header = document.querySelector('header');
            const headerHeight = header.offsetHeight;
            const scrollPosition = window.pageYOffset;
            
            let currentSection = 'home'; // Default to home
            
            // Special handling for home section
            if (scrollPosition < headerHeight) {
                currentSection = 'home';
            } else {
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionId = section.getAttribute('id');
                    
                    // Skip home section in this loop since we handle it above
                    if (sectionId !== 'home') {
                        if (scrollPosition >= sectionTop - headerHeight - 50) {
                            currentSection = sectionId;
                        }
                    }
                });
            }
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + currentSection) {
                    link.classList.add('active');
                }
            });
        }

        // Member System
        const memberSystem = {
            // LocalStorage keys
            USERS_KEY: 'kono_kaffe_users',
            CURRENT_USER_KEY: 'kono_kaffe_current_user',
            
            // Initialize users array if not exists
            initializeUsers() {
                if (!localStorage.getItem(this.USERS_KEY)) {
                    localStorage.setItem(this.USERS_KEY, JSON.stringify([]));
                }
            },
            
            // Get all users
            getUsers() {
                return JSON.parse(localStorage.getItem(this.USERS_KEY) || '[]');
            },
            
            // Save users
            saveUsers(users) {
                localStorage.setItem(this.USERS_KEY, JSON.stringify(users));
            },
            
            // Register new user
            register(userData) {
                this.initializeUsers();
                const users = this.getUsers();
                
                // Check if email already exists
                if (users.find(user => user.email === userData.email)) {
                    throw new Error('このメールアドレスは既に登録されています');
                }
                
                // Create new user
                const newUser = {
                    id: Date.now().toString(),
                    name: userData.name,
                    email: userData.email,
                    password: userData.password, // In real app, this should be hashed
                    registeredAt: new Date().toISOString()
                };
                
                users.push(newUser);
                this.saveUsers(users);
                
                return newUser;
            },
            
            // Login user
            login(email, password) {
                const users = this.getUsers();
                const user = users.find(u => u.email === email && u.password === password);
                
                if (!user) {
                    throw new Error('メールアドレスまたはパスワードが間違っています');
                }
                
                // Set current user
                localStorage.setItem(this.CURRENT_USER_KEY, JSON.stringify(user));
                return user;
            },
            
            // Get current user
            getCurrentUser() {
                const userStr = localStorage.getItem(this.CURRENT_USER_KEY);
                return userStr ? JSON.parse(userStr) : null;
            },
            
            // Logout
            logout() {
                localStorage.removeItem(this.CURRENT_USER_KEY);
            },
            
            // Check if user is logged in
            isLoggedIn() {
                return this.getCurrentUser() !== null;
            }
        };

        // Validation functions
        const validation = {
            email(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            },
            
            password(password) {
                return password.length >= 8;
            },
            
            name(name) {
                return name.trim().length >= 2;
            }
        };

        // Modal functions
        function openLoginModal() {
            document.getElementById('loginModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function openRegisterModal() {
            document.getElementById('registerModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function openMypageModal() {
            const user = memberSystem.getCurrentUser();
            if (user) {
                document.getElementById('mypageName').textContent = user.name;
                document.getElementById('mypageEmail').textContent = user.email;
                document.getElementById('mypageRegistered').textContent = new Date(user.registeredAt).toLocaleDateString('ja-JP');
                document.getElementById('mypageModal').style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
            clearErrors();
        }

        function switchToLogin() {
            closeModal('registerModal');
            openLoginModal();
        }

        function switchToRegister() {
            closeModal('loginModal');
            openRegisterModal();
        }

        // Error handling
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        function clearErrors() {
            const errorElements = document.querySelectorAll('.error-message');
            errorElements.forEach(element => {
                element.style.display = 'none';
                element.textContent = '';
            });
        }

        // Login form handler
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    clearErrors();
                    
                    const email = document.getElementById('loginEmail').value;
                    const password = document.getElementById('loginPassword').value;
                    
                    // Validation
                    let hasError = false;
                    
                    if (!validation.email(email)) {
                        showError('loginEmailError', '有効なメールアドレスを入力してください');
                        hasError = true;
                    }
                    
                    if (!validation.password(password)) {
                        showError('loginPasswordError', 'パスワードは8文字以上で入力してください');
                        hasError = true;
                    }
                    
                    if (hasError) return;
                    
                    // Try to login
                    try {
                        memberSystem.login(email, password);
                        closeModal('loginModal');
                        updateAuthUI();
                        showWelcomeMessage();
                    } catch (error) {
                        showError('loginPasswordError', error.message);
                    }
                });
            }
        });

        // Register form handler
        document.addEventListener('DOMContentLoaded', function() {
            const registerForm = document.getElementById('registerForm');
            if (registerForm) {
                registerForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    clearErrors();
                    
                    const name = document.getElementById('registerName').value;
                    const email = document.getElementById('registerEmail').value;
                    const password = document.getElementById('registerPassword').value;
                    const confirmPassword = document.getElementById('registerConfirmPassword').value;
                    
                    // Validation
                    let hasError = false;
                    
                    if (!validation.name(name)) {
                        showError('registerNameError', '名前は2文字以上で入力してください');
                        hasError = true;
                    }
                    
                    if (!validation.email(email)) {
                        showError('registerEmailError', '有効なメールアドレスを入力してください');
                        hasError = true;
                    }
                    
                    if (!validation.password(password)) {
                        showError('registerPasswordError', 'パスワードは8文字以上で入力してください');
                        hasError = true;
                    }
                    
                    if (password !== confirmPassword) {
                        showError('registerConfirmPasswordError', 'パスワードが一致しません');
                        hasError = true;
                    }
                    
                    if (hasError) return;
                    
                    // Try to register
                    try {
                        memberSystem.register({ name, email, password });
                        memberSystem.login(email, password);
                        closeModal('registerModal');
                        updateAuthUI();
                        showWelcomeMessage();
                    } catch (error) {
                        showError('registerEmailError', error.message);
                    }
                });
            }
        });

        // Logout function
        function logout() {
            memberSystem.logout();
            updateAuthUI();
            closeModal('mypageModal');
            
            // Show logout message
            const logoutMessage = document.createElement('div');
            logoutMessage.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(45deg, var(--primary-navy), var(--secondary-navy));
                color: white;
                padding: 2rem;
                border-radius: 10px;
                z-index: 10001;
                text-align: center;
                box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            `;
            logoutMessage.innerHTML = '<p>ログアウトしました</p>';
            document.body.appendChild(logoutMessage);
            
            setTimeout(() => {
                logoutMessage.remove();
            }, 2000);
        }

        // Update auth UI based on login status
        function updateAuthUI() {
            const user = memberSystem.getCurrentUser();
            const authButtons = document.getElementById('authButtons');
            const userMenu = document.getElementById('userMenu');
            const userName = document.getElementById('userName');
            
            if (user) {
                // User is logged in
                authButtons.style.display = 'none';
                userMenu.style.display = 'flex';
                userName.textContent = user.name + 'さん';
            } else {
                // User is not logged in
                authButtons.style.display = 'flex';
                userMenu.style.display = 'none';
            }
        }

        // Show welcome message
        function showWelcomeMessage() {
            const user = memberSystem.getCurrentUser();
            if (user) {
                const welcomeMessage = document.createElement('div');
                welcomeMessage.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(45deg, var(--navy-accent), var(--silver));
                    color: white;
                    padding: 2rem;
                    border-radius: 10px;
                    z-index: 10001;
                    text-align: center;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
                `;
                welcomeMessage.innerHTML = `<p>ようこそ、${user.name}さん！</p>`;
                document.body.appendChild(welcomeMessage);
                
                setTimeout(() => {
                    welcomeMessage.remove();
                }, 2000);
            }
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    closeModal(modal.id);
                }
            });
        });

        // Initialize auth UI on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateAuthUI();
            cartSystem.initialize();
        });

        // Shopping Cart System
        const cartSystem = {
            CART_KEY: 'kono_kaffe_cart',
            cart: [],
            
            // Initialize cart system
            initialize() {
                this.loadCart();
                this.updateCartDisplay();
            },
            
            // Load cart from localStorage
            loadCart() {
                const savedCart = localStorage.getItem(this.CART_KEY);
                if (savedCart) {
                    this.cart = JSON.parse(savedCart);
                }
            },
            
            // Save cart to localStorage
            saveCart() {
                localStorage.setItem(this.CART_KEY, JSON.stringify(this.cart));
            },
            
            // Add item to cart
            addItem(item) {
                const existingItem = this.cart.find(cartItem => cartItem.name === item.name);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    this.cart.push({
                        id: Date.now().toString(),
                        name: item.name,
                        price: parseInt(item.price),
                        image: item.image,
                        quantity: 1
                    });
                }
                
                this.saveCart();
                this.updateCartDisplay();
                this.showAddToCartAnimation(item);
            },
            
            // Remove item from cart
            removeItem(itemId) {
                this.cart = this.cart.filter(item => item.id !== itemId);
                this.saveCart();
                this.updateCartDisplay();
                this.updateCartModal();
            },
            
            // Update item quantity
            updateQuantity(itemId, newQuantity) {
                const item = this.cart.find(item => item.id === itemId);
                if (item) {
                    if (newQuantity <= 0) {
                        this.removeItem(itemId);
                    } else {
                        item.quantity = newQuantity;
                        this.saveCart();
                        this.updateCartDisplay();
                        this.updateCartModal();
                    }
                }
            },
            
            // Get cart total
            getTotal() {
                return this.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            },
            
            // Get cart item count
            getItemCount() {
                return this.cart.reduce((count, item) => count + item.quantity, 0);
            },
            
            // Update cart display (counter)
            updateCartDisplay() {
                const cartCount = document.getElementById('cartCount');
                const count = this.getItemCount();
                
                if (count > 0) {
                    cartCount.textContent = count;
                    cartCount.style.display = 'flex';
                } else {
                    cartCount.textContent = '';
                    cartCount.style.display = 'none';
                }
            },
            
            // Show add to cart animation
            showAddToCartAnimation(item) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(45deg, #10b981, #34d399);
                    color: white;
                    padding: 1rem 2rem;
                    border-radius: 10px;
                    z-index: 10001;
                    box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
                    animation: slideInRight 0.3s ease-out;
                `;
                notification.innerHTML = `
                    <p><strong>${item.name}</strong> をカートに追加しました！</p>
                    <p>合計: ${this.getItemCount()}個 (¥${this.getTotal().toLocaleString()})</p>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideOutRight 0.3s ease-in';
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 3000);
            },
            
            // Update cart modal content
            updateCartModal() {
                const cartItemsContainer = document.getElementById('cartItems');
                const cartTotal = document.getElementById('cartTotal');
                const cartEmpty = document.getElementById('cartEmpty');
                
                if (!cartItemsContainer) return;
                
                if (this.cart.length === 0) {
                    cartItemsContainer.innerHTML = '';
                    cartEmpty.style.display = 'block';
                    cartTotal.textContent = '¥0';
                    return;
                }
                
                cartEmpty.style.display = 'none';
                
                cartItemsContainer.innerHTML = this.cart.map(item => `
                    <div class="cart-item" data-id="${item.id}">
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <p>¥${item.price.toLocaleString()}</p>
                        </div>
                        <div class="cart-item-controls">
                            <button class="qty-btn" onclick="cartSystem.updateQuantity('${item.id}', ${item.quantity - 1})" ${item.quantity <= 1 ? 'disabled' : ''}>-</button>
                            <span class="qty-display">${item.quantity}</span>
                            <button class="qty-btn" onclick="cartSystem.updateQuantity('${item.id}', ${item.quantity + 1})">+</button>
                            <button class="remove-btn" onclick="cartSystem.removeItem('${item.id}')">×</button>
                        </div>
                    </div>
                `).join('');
                
                cartTotal.textContent = `¥${this.getTotal().toLocaleString()}`;
            },
            
            // Clear cart
            clearCart() {
                this.cart = [];
                this.saveCart();
                this.updateCartDisplay();
                this.updateCartModal();
            }
        };
        
        // Add to cart function
        function addToCart(button) {
            const item = {
                name: button.getAttribute('data-name'),
                price: button.getAttribute('data-price'),
                image: button.getAttribute('data-image')
            };
            
            cartSystem.addItem(item);
            
            // Button animation
            button.classList.add('added');
            const originalText = button.textContent;
            button.textContent = '追加済み';
            
            setTimeout(() => {
                button.classList.remove('added');
                button.textContent = originalText;
            }, 2000);
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOutRight {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
        
        // Product Detail Data
        const productDetails = {
            ethiopia: {
                name: 'エチオピア イルガチェフェ',
                price: 1200,
                origin: 'エチオピア イルガチェフェ地区',
                roast: 'ライトロースト',
                description: 'エチオピアのイルガチェフェ地区から産出される、世界最高峰のコーヒーのひとつです。標高約1,800～2,200mの高地で栽培され、特別な気候と土壌が生み出す素晴らしい風味をお楽しみいただけます。',
                taste: {
                    acidity: 5,
                    body: 3,
                    sweetness: 4,
                    bitterness: 2
                },
                notes: 'フローラル、シトラス、ベリー系の香り。紅茶のような上品な酸味と花のような香りが特徴です。',
                brewing: [
                    'ハンドドリップ（V60、カリタ）',
                    'フレンチプレス',
                    'エアロプレス',
                    'サイフォンコーヒーメーカー'
                ],
                processing: 'ウォッシュド製法',
                farmInfo: '地元の小規模農家による手作業で丁寧に栽培されています。持続可能な農業とフェアトレードを推進しています。',
                dataId: 'ethiopia'
            },
            colombia: {
                name: 'コロンビア ウイラ',
                price: 1080,
                origin: 'コロンビア ウイラ県',
                roast: 'ミディアムロースト',
                description: 'コロンビア南部のウイラ県で栽培された、バランスの取れた上品なコーヒーです。アンデス山脈の清澄な水と豊かな火山灰土壌が育む、まろやかで深みのある味わいをお楽しみいただけます。',
                taste: {
                    acidity: 3,
                    body: 4,
                    sweetness: 4,
                    bitterness: 3
                },
                notes: 'ナッツ、チョコレート、キャラメルの香り。まろやかな甘みと適度なコクが特徴です。',
                brewing: [
                    'ドリップコーヒー',
                    'エスプレッソ',
                    'フレンチプレス',
                    'モカポット'
                ],
                processing: 'ウォッシュド製法',
                farmInfo: 'ウイラ県の小規模農家が結成した協同組合で管理されています。高品質なコーヒーの生産を目指しています。',
                dataId: 'colombia'
            },
            rwanda: {
                name: 'ルワンダ ムサンゼ',
                price: 1350,
                origin: 'ルワンダ ムサンゼ地区',
                roast: 'ライトロースト',
                description: 'ルワンダのムサンゼ地区で栽培された、近年注目を集める高品質なコーヒーです。標高約1,700～2,000mの高地で栽培され、特別な気候と土壌が生み出す素晴らしい風味をお楽しみいただけます。',
                taste: {
                    acidity: 4,
                    body: 4,
                    sweetness: 5,
                    bitterness: 2
                },
                notes: 'フルーツ、ハニー、フローラルの香り。甘みが強く、フルーツライクな酸味が特徴です。',
                brewing: [
                    'ハンドドリップ（V60）',
                    'ケメックス',
                    'エアロプレス',
                    'サイフォンコーヒーメーカー'
                ],
                processing: 'ウォッシュド製法',
                farmInfo: 'ルワンダの小規模農家による手作業で丁寧に栽培されています。持続可能な農業とフェアトレードを推進しています。',
                dataId: 'rwanda'
            },
            brazil: {
                name: 'ブラジル セラード',
                price: 950,
                origin: 'ブラジル セラード地区',
                roast: 'ダークロースト',
                description: 'ブラジルで最も有名なセラード地区から産出される、安定した品質とコストパフォーマンスを誇るコーヒーです。ダークローストにより、深いコクと甘みが引き出されています。',
                taste: {
                    acidity: 2,
                    body: 5,
                    sweetness: 3,
                    bitterness: 4
                },
                notes: 'ナッツ、チョコレート、カラメルの香り。深いコクと甘みが特徴です。',
                brewing: [
                    'エスプレッソ',
                    'フレンチプレス',
                    'モカポット',
                    'ドリップコーヒー'
                ],
                processing: 'パルプド・ナチュラル製法',
                farmInfo: '大規模農園での機械化された栽培と、安定した品質管理が特徴です。',
                dataId: 'brazil'
            },
            guatemala: {
                name: 'グアテマラ アンティグア',
                price: 1180,
                origin: 'グアテマラ アンティグア地区',
                roast: 'ミディアムロースト',
                description: 'グアテマラのアンティグア地区で栽培された、世界的に評価の高いコーヒーです。火山灰土壌と清澄な水、理想的な気候が育む、スモーキーでスパイシーな風味をお楽しみいただけます。',
                taste: {
                    acidity: 3,
                    body: 4,
                    sweetness: 3,
                    bitterness: 4
                },
                notes: 'スモーキー、スパイシー、ダークチョコレートの香り。特徴的なスモーキーな香りとコクが特徴です。',
                brewing: [
                    'フレンチプレス',
                    'エスプレッソ',
                    'モカポット',
                    'ドリップコーヒー'
                ],
                processing: 'ウォッシュド製法',
                farmInfo: 'アンティグア地区の伝統的な農家による手作業で丁寧に栽培されています。',
                dataId: 'guatemala'
            },
            kenya: {
                name: 'ケニア AA',
                price: 1450,
                origin: 'ケニア キリニャガ地区',
                roast: 'ミディアムロースト',
                description: 'ケニアの最高グレードであるAAグレードのコーヒーです。赤道直下の強い日差しと高地の清澄な空気が育む、力強い酸味とフルーツィーな風味をお楽しみいただけます。',
                taste: {
                    acidity: 5,
                    body: 4,
                    sweetness: 4,
                    bitterness: 3
                },
                notes: 'ブラックカラント、シトラス、ワインの香り。力強い酸味とフルーツィーな風味が特徴です。',
                brewing: [
                    'ハンドドリップ（V60）',
                    'ケメックス',
                    'エアロプレス',
                    'フレンチプレス'
                ],
                processing: 'ウォッシュド製法',
                farmInfo: 'ケニアの小規模農家が結成した協同組合で管理されています。高品質なコーヒーの生産を目指しています。',
                dataId: 'kenya'
            }
        };
        
        // Product Detail Functions
        function showProductDetail(productId) {
            const product = productDetails[productId];
            if (!product) return;
            
            const modal = document.getElementById('productDetailModal');
            const content = document.getElementById('productDetailContent');
            
            content.innerHTML = `
                <div class="product-detail-header">
                    <h2>${product.name}</h2>
                    <p class="price">¥${product.price.toLocaleString()}</p>
                </div>
                
                <div class="product-detail-body">
                    <div class="product-image-large">
                        <div>${product.name}</div>
                    </div>
                    
                    <div class="product-info-detail">
                        <h3>産地情報</h3>
                        <p><strong>産地:</strong> ${product.origin}</p>
                        <p><strong>焙煎度:</strong> ${product.roast}</p>
                        <p><strong>精製方法:</strong> ${product.processing}</p>
                        
                        <h3>味の特徴</h3>
                        <p>${product.notes}</p>
                    </div>
                </div>
                
                <div class="taste-profile">
                    <div class="taste-item">
                        <div class="taste-label">酸味</div>
                        <div class="taste-level">
                            ${generateTasteLevel(product.taste.acidity)}
                        </div>
                    </div>
                    <div class="taste-item">
                        <div class="taste-label">コク</div>
                        <div class="taste-level">
                            ${generateTasteLevel(product.taste.body)}
                        </div>
                    </div>
                    <div class="taste-item">
                        <div class="taste-label">甘み</div>
                        <div class="taste-level">
                            ${generateTasteLevel(product.taste.sweetness)}
                        </div>
                    </div>
                    <div class="taste-item">
                        <div class="taste-label">苦味</div>
                        <div class="taste-level">
                            ${generateTasteLevel(product.taste.bitterness)}
                        </div>
                    </div>
                </div>
                
                <div class="product-description">
                    <h3>商品説明</h3>
                    <p>${product.description}</p>
                </div>
                
                <div class="brewing-methods">
                    <h4>おすすめの抽出方法</h4>
                    <ul>
                        ${product.brewing.map(method => `<li>${method}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="farm-info">
                    <h3>農園情報</h3>
                    <p>${product.farmInfo}</p>
                </div>
                
                <div class="product-detail-actions">
                    <button class="back-to-products" onclick="closeModal('productDetailModal')">戻る</button>
                    <button class="detail-add-to-cart" onclick="addToCartFromDetail('${product.dataId}')">カートに追加</button>
                </div>
            `;
            
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        function generateTasteLevel(level) {
            let dots = '';
            for (let i = 1; i <= 5; i++) {
                dots += `<div class="taste-dot ${i <= level ? 'active' : ''}"></div>`;
            }
            return dots;
        }
        
        function addToCartFromDetail(productId) {
            const product = productDetails[productId];
            if (!product) return;
            
            const item = {
                name: product.name,
                price: product.price.toString(),
                image: product.dataId
            };
            
            cartSystem.addItem(item);
            
            // Show success message
            const button = document.querySelector('.detail-add-to-cart');
            const originalText = button.textContent;
            button.textContent = '追加済み ✓';
            button.style.background = 'linear-gradient(45deg, #10b981, #34d399)';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = 'linear-gradient(45deg, var(--navy-accent), var(--silver))';
            }, 2000);
        }
        
        // Cart Modal Functions
        function openCartModal() {
            document.getElementById('cartModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            cartSystem.updateCartModal();
        }
        
        function clearCart() {
            if (confirm('カートを空にしますか？')) {
                cartSystem.clearCart();
            }
        }
        
        function checkout() {
            if (cartSystem.cart.length === 0) {
                alert('カートが空です。');
                return;
            }
            
            const user = memberSystem.getCurrentUser();
            if (!user) {
                alert('注文するにはログインが必要です。');
                closeModal('cartModal');
                openLoginModal();
                return;
            }
            
            // Simple checkout process
            const orderSummary = `
【注文確認】
お名前: ${user.name}
メール: ${user.email}

【商品】
${cartSystem.cart.map(item => `${item.name} x${item.quantity} - ¥${(item.price * item.quantity).toLocaleString()}`).join('\n')}

合計: ¥${cartSystem.getTotal().toLocaleString()}

この内容で注文しますか？`;
            
            if (confirm(orderSummary)) {
                // Save order to localStorage (simple implementation)
                const orders = JSON.parse(localStorage.getItem('kono_kaffe_orders') || '[]');
                const newOrder = {
                    id: Date.now().toString(),
                    userId: user.id,
                    items: [...cartSystem.cart],
                    total: cartSystem.getTotal(),
                    date: new Date().toISOString(),
                    status: 'pending'
                };
                
                orders.push(newOrder);
                localStorage.setItem('kono_kaffe_orders', JSON.stringify(orders));
                
                cartSystem.clearCart();
                closeModal('cartModal');
                
                showOrderConfirmation(newOrder);
            }
        }
        
        function showOrderConfirmation(order) {
            const confirmation = document.createElement('div');
            confirmation.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, var(--primary-navy), var(--secondary-navy));
                color: white;
                padding: 3rem;
                border-radius: 20px;
                z-index: 10001;
                text-align: center;
                max-width: 500px;
                box-shadow: 0 25px 50px rgba(0,0,0,0.5);
                animation: fadeIn 0.5s ease-out;
            `;
            
            confirmation.innerHTML = `
                <h2 style="font-family: 'Playfair Display', serif; color: #10b981; margin-bottom: 1rem;">ご注文ありがとうございます！</h2>
                <p style="margin-bottom: 1rem;">注文番号: ${order.id}</p>
                <p style="margin-bottom: 1rem;">合計: ¥${order.total.toLocaleString()}</p>
                <p style="margin-bottom: 2rem; font-size: 0.9rem; color: #d1d5db;">ご注文内容をメールでお送りします。<br>お渡しまで今しばらくお待ちください。</p>
                <button onclick="this.parentElement.remove()" style="background: linear-gradient(45deg, #10b981, #34d399); color: white; border: none; padding: 1rem 2rem; border-radius: 25px; cursor: pointer; font-family: 'Noto Serif JP', serif;">閉じる</button>
            `;
            
            document.body.appendChild(confirmation);
            
            setTimeout(() => {
                confirmation.remove();
            }, 10000);
        }
        
        // Brewing Guide Interactive Features
        const brewingSystem = {
            timers: {
                drip: null,
                french: null,
                espresso: null,
                pour: null
            },
            timerStates: {
                drip: { time: 0, target: 240, running: false }, // 4 minutes
                french: { time: 240, target: 240, running: false }, // 4 minutes countdown
                espresso: { time: 0, target: 25, running: false }, // 25 seconds
                pour: { time: 0, target: 150, running: false } // 2.5 minutes
            }
        };

        function switchBrewingMethod(method) {
            // Remove active class from all buttons and guides
            document.querySelectorAll('.method-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.method-guide').forEach(guide => guide.classList.remove('active'));
            
            // Add active class to selected button and guide
            event.target.classList.add('active');
            document.getElementById(method + '-guide').classList.add('active');
            
            // Reset all timers when switching methods
            Object.keys(brewingSystem.timers).forEach(key => {
                if (brewingSystem.timers[key]) {
                    clearInterval(brewingSystem.timers[key]);
                    brewingSystem.timers[key] = null;
                }
                brewingSystem.timerStates[key].running = false;
                updateTimerButton(key, false);
            });
            
            resetTimer();
        }

        function toggleTimer(method) {
            const state = brewingSystem.timerStates[method];
            
            if (state.running) {
                // Stop timer
                clearInterval(brewingSystem.timers[method]);
                brewingSystem.timers[method] = null;
                state.running = false;
                updateTimerButton(method, false);
            } else {
                // Start timer
                state.running = true;
                updateTimerButton(method, true);
                
                brewingSystem.timers[method] = setInterval(() => {
                    if (method === 'french') {
                        // French press counts down
                        state.time--;
                        if (state.time <= 0) {
                            state.time = 0;
                            clearInterval(brewingSystem.timers[method]);
                            brewingSystem.timers[method] = null;
                            state.running = false;
                            updateTimerButton(method, false);
                            showBrewingAlert('フレンチプレスの抽出完了！プランジャーをゆっくり押してください。');
                        }
                    } else {
                        // Other methods count up
                        state.time++;
                        if (state.time >= state.target) {
                            clearInterval(brewingSystem.timers[method]);
                            brewingSystem.timers[method] = null;
                            state.running = false;
                            updateTimerButton(method, false);
                            
                            let message = '';
                            switch(method) {
                                case 'drip':
                                    message = 'ドリップコーヒーの抽出完了！美味しいコーヒーをお楽しみください。';
                                    break;
                                case 'espresso':
                                    message = 'エスプレッソの抽出完了！美しいクレマができましたか？';
                                    break;
                                case 'pour':
                                    message = 'ハンドドリップの抽出完了！香り高いコーヒーの出来上がりです。';
                                    break;
                            }
                            showBrewingAlert(message);
                        }
                    }
                    
                    updateTimerDisplay(method);
                }, 1000);
            }
        }

        function resetTimer() {
            // Reset all timers to initial state
            brewingSystem.timerStates.drip.time = 0;
            brewingSystem.timerStates.french.time = 240;
            brewingSystem.timerStates.espresso.time = 0;
            brewingSystem.timerStates.pour.time = 0;
            
            // Stop all running timers
            Object.keys(brewingSystem.timers).forEach(key => {
                if (brewingSystem.timers[key]) {
                    clearInterval(brewingSystem.timers[key]);
                    brewingSystem.timers[key] = null;
                }
                brewingSystem.timerStates[key].running = false;
                updateTimerButton(key, false);
                updateTimerDisplay(key);
            });
        }

        function updateTimerDisplay(method) {
            const state = brewingSystem.timerStates[method];
            const minutes = Math.floor(state.time / 60);
            const seconds = state.time % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const timerElement = document.getElementById(`timer${method === 'drip' ? '' : '-' + method}`);
            if (timerElement) {
                timerElement.textContent = timeString;
            }
        }

        function updateTimerButton(method, isRunning) {
            const button = document.querySelector(`[onclick="toggleTimer('${method}')"]`);
            if (button) {
                if (isRunning) {
                    button.textContent = 'ストップ';
                    button.classList.add('active');
                } else {
                    button.textContent = 'スタート';
                    button.classList.remove('active');
                }
            }
        }

        function showBrewingAlert(message) {
            const alert = document.createElement('div');
            alert.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, var(--primary-navy), var(--navy-accent));
                color: white;
                padding: 1.5rem 2rem;
                border-radius: 15px;
                z-index: 10001;
                max-width: 350px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                animation: slideInRight 0.5s ease-out;
                font-family: 'Noto Serif JP', serif;
            `;
            
            alert.innerHTML = `
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <span style="font-size: 1.5rem;">☕</span>
                    <div>
                        <p style="margin: 0; font-weight: 600;">${message}</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; margin-left: auto;">×</button>
                </div>
            `;
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                if (alert.parentElement) {
                    alert.remove();
                }
            }, 5000);
        }

        // Add CSS for the alert animation
        const alertStyles = document.createElement('style');
        alertStyles.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(alertStyles);

        // Add event listeners for brewing method buttons
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize brewing guide functionality
            const methodButtons = document.querySelectorAll('.method-btn');
            methodButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const method = this.getAttribute('data-method');
                    switchBrewingMethod(method);
                });
            });

            // Initialize timer displays
            Object.keys(brewingSystem.timerStates).forEach(method => {
                updateTimerDisplay(method);
            });
        });

        // Tasting System
        const tastingSystem = {
            selectedFlavors: [],
            currentRating: 0,
            savedNotes: JSON.parse(localStorage.getItem('kono_kaffe_tasting_notes') || '[]'),
            
            flavorData: {
                // Fruity category
                berry: { category: 'fruity', name: 'ベリー', description: 'ブルーベリー、ラズベリー、ストロベリーなどのベリー系の甘酸っぱい風味。アントシアニンによる鮮やかな味わいが特徴。' },
                citrus: { category: 'fruity', name: '柑橘', description: 'レモン、オレンジ、グレープフルーツなどの爽やかな酸味。クエン酸による明るく活気のある風味。' },
                'stone-fruit': { category: 'fruity', name: '核果類', description: '桃、杏、プラム、チェリーなどの甘くジューシーな果実の風味。豊潤で複雑な甘みが魅力。' },
                
                // Floral category
                jasmine: { category: 'floral', name: 'ジャスミン', description: '上品で優雅な花の香り、特にジャスミンの甘い芳香。エレガントで洗練された香りのプロフィール。' },
                rose: { category: 'floral', name: 'ローズ', description: 'バラの花びらのような上品で華やかな香り。ロマンチックで繊細な花の香りが印象的。' },
                lavender: { category: 'floral', name: 'ラベンダー', description: 'ハーブ系の爽やかな花の香り。リラックス効果のある穏やかで心地よい香り。' },
                
                // Sweet category
                chocolate: { category: 'sweet', name: 'チョコレート', description: 'ダークチョコレートやミルクチョコレートの甘い風味。カカオの深みとバニラの甘さが融合。' },
                caramel: { category: 'sweet', name: 'キャラメル', description: '焦がした砂糖の甘く香ばしい風味。メイラード反応による複雑で豊かな甘み。' },
                honey: { category: 'sweet', name: 'ハニー', description: 'はちみつのような自然な甘さと複雑な風味。花の蜜による純粋で上品な甘み。' },
                
                // Nutty category
                almond: { category: 'nutty', name: 'アーモンド', description: 'アーモンドの香ばしく上品なナッツの風味。マルチパンやアマレットのような優雅な香り。' },
                hazelnut: { category: 'nutty', name: 'ヘーゼルナッツ', description: 'ヘーゼルナッツの濃厚でクリーミーな風味。ヌテラやプラリネのような贅沢な味わい。' },
                walnut: { category: 'nutty', name: 'ウォルナッツ', description: 'クルミの豊かで複雑なナッツの風味。オメガ脂肪酸による深いコクと風味。' },
                
                // Earthy category
                woody: { category: 'earthy', name: 'ウッディー', description: '木や樹皮のような自然で落ち着いた風味。セダーやオークのような温かみのある香り。' },
                herbal: { category: 'earthy', name: 'ハーバル', description: 'ハーブや草原のような爽やかで緑の風味。タイム、ローズマリー、セージなどの複雑な香り。' },
                spicy: { category: 'earthy', name: 'スパイシー', description: 'スパイスのような温かく刺激的な風味。シナモン、クローブ、ナツメグなどの豊かなスパイス感。' }
            }
        };

        function initializeTastingSystem() {
            // Initialize flavor wheel interactions
            const flavorSegments = document.querySelectorAll('.flavor-segment[data-flavor]');
            flavorSegments.forEach(segment => {
                segment.addEventListener('click', function() {
                    const flavor = this.getAttribute('data-flavor');
                    selectFlavor(flavor);
                });
            });

            // Initialize star rating
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    setStarRating(rating);
                });
                
                star.addEventListener('mouseover', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    highlightStars(rating);
                });
            });

            // Reset star highlight on mouse leave
            document.getElementById('starRating').addEventListener('mouseleave', function() {
                highlightStars(tastingSystem.currentRating);
            });

            // Initialize sliders
            const sliders = document.querySelectorAll('.slider');
            sliders.forEach(slider => {
                slider.addEventListener('input', function() {
                    const valueDisplay = document.getElementById(this.id + '-value');
                    if (valueDisplay) {
                        valueDisplay.textContent = this.value;
                    }
                });
            });

            // Load saved notes
            displaySavedNotes();
        }

        function selectFlavor(flavorKey) {
            const flavorData = tastingSystem.flavorData[flavorKey];
            if (!flavorData) return;

            // Visual feedback: highlight selected segment
            const allSegments = document.querySelectorAll('.flavor-segment[data-flavor]');
            allSegments.forEach(seg => seg.classList.remove('selected'));
            
            const selectedSegment = document.querySelector(`.flavor-segment[data-flavor="${flavorKey}"]`);
            if (selectedSegment) {
                selectedSegment.classList.add('selected');
                
                // Add a subtle animation effect
                selectedSegment.style.animation = 'none';
                setTimeout(() => {
                    selectedSegment.style.animation = 'flavorPulse 0.6s ease-out';
                }, 10);
            }

            // Update flavor info display with enhanced styling
            const flavorInfo = document.getElementById('flavorInfo');
            flavorInfo.innerHTML = `
                <div class="flavor-detail">
                    <h4 class="flavor-name">${flavorData.name}</h4>
                    <span class="flavor-category">${getCategoryDisplayName(flavorData.category)}</span>
                    <p class="flavor-description">${flavorData.description}</p>
                </div>
            `;

            // Add to selected flavors if not already selected
            const existingFlavor = tastingSystem.selectedFlavors.find(f => f.key === flavorKey);
            if (!existingFlavor) {
                tastingSystem.selectedFlavors.push({
                    key: flavorKey,
                    name: flavorData.name,
                    category: flavorData.category
                });
                updateSelectedFlavorsDisplay();
            }
        }

        function getCategoryDisplayName(category) {
            const categoryNames = {
                'fruity': 'フルーティー',
                'floral': 'フローラル', 
                'sweet': 'スイート',
                'nutty': 'ナッティー',
                'earthy': 'アーシー'
            };
            return categoryNames[category] || category;
        }

        function updateSelectedFlavorsDisplay() {
            const selectedFlavorsContainer = document.getElementById('selectedFlavors');
            
            if (tastingSystem.selectedFlavors.length === 0) {
                selectedFlavorsContainer.innerHTML = '<p class="no-flavors">フレーバーホイールからフレーバーを選択してください</p>';
                return;
            }

            selectedFlavorsContainer.innerHTML = tastingSystem.selectedFlavors.map(flavor => 
                `<span class="flavor-tag ${flavor.category}" onclick="removeFlavor('${flavor.key}')">${flavor.name} ×</span>`
            ).join('');
        }

        function removeFlavor(flavorKey) {
            tastingSystem.selectedFlavors = tastingSystem.selectedFlavors.filter(f => f.key !== flavorKey);
            updateSelectedFlavorsDisplay();
        }

        function setStarRating(rating) {
            tastingSystem.currentRating = rating;
            highlightStars(rating);
        }

        function highlightStars(rating) {
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function saveTastingNote() {
            const coffeeSelect = document.getElementById('coffee-select');
            const notesText = document.getElementById('notes');
            
            if (!coffeeSelect.value) {
                alert('コーヒーを選択してください。');
                return;
            }

            const tastingNote = {
                id: Date.now(),
                coffee: coffeeSelect.value,
                coffeeName: coffeeSelect.options[coffeeSelect.selectedIndex].text,
                date: new Date().toLocaleDateString('ja-JP'),
                attributes: {
                    acidity: document.getElementById('acidity').value,
                    bitterness: document.getElementById('bitterness').value,
                    sweetness: document.getElementById('sweetness').value,
                    body: document.getElementById('body').value,
                    aroma: document.getElementById('aroma').value
                },
                flavors: [...tastingSystem.selectedFlavors],
                notes: notesText.value,
                rating: tastingSystem.currentRating || 1
            };

            tastingSystem.savedNotes.push(tastingNote);
            localStorage.setItem('kono_kaffe_tasting_notes', JSON.stringify(tastingSystem.savedNotes));
            
            displaySavedNotes();
            showTastingAlert('テイスティングノートが保存されました！');
            clearTastingForm();
        }

        function clearTastingForm() {
            document.getElementById('coffee-select').value = '';
            document.getElementById('notes').value = '';
            
            // Reset sliders
            ['acidity', 'bitterness', 'sweetness', 'body', 'aroma'].forEach(attr => {
                const slider = document.getElementById(attr);
                const valueDisplay = document.getElementById(attr + '-value');
                slider.value = 5;
                if (valueDisplay) valueDisplay.textContent = '5';
            });

            // Clear selected flavors
            tastingSystem.selectedFlavors = [];
            updateSelectedFlavorsDisplay();

            // Reset star rating
            tastingSystem.currentRating = 0;
            highlightStars(0);

            // Reset flavor info
            document.getElementById('flavorInfo').innerHTML = `
                <h4>フレーバーを選択してください</h4>
                <p>ホイール上のフレーバーをクリックすると、詳細な説明が表示されます。</p>
            `;
        }

        function displaySavedNotes() {
            const savedNotesContainer = document.getElementById('savedNotes');
            
            if (tastingSystem.savedNotes.length === 0) {
                savedNotesContainer.innerHTML = '<p class="no-saved-notes">まだ保存されたテイスティングノートはありません。</p>';
                return;
            }

            const notesHTML = tastingSystem.savedNotes
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .map(note => `
                    <div class="note-card">
                        <div class="note-header">
                            <div class="note-coffee">${note.coffeeName}</div>
                            <div class="note-date">${note.date}</div>
                        </div>
                        <div class="note-attributes">
                            <div class="note-attribute">
                                <span>酸味:</span>
                                <span>${note.attributes.acidity}/10</span>
                            </div>
                            <div class="note-attribute">
                                <span>苦味:</span>
                                <span>${note.attributes.bitterness}/10</span>
                            </div>
                            <div class="note-attribute">
                                <span>甘み:</span>
                                <span>${note.attributes.sweetness}/10</span>
                            </div>
                            <div class="note-attribute">
                                <span>ボディ:</span>
                                <span>${note.attributes.body}/10</span>
                            </div>
                        </div>
                        <div class="note-flavors">
                            ${note.flavors.map(flavor => `<span class="flavor-tag ${flavor.category}">${flavor.name}</span>`).join('')}
                        </div>
                        <div class="note-text">${note.notes || 'ノートなし'}</div>
                        <div class="note-rating">
                            ${Array(5).fill().map((_, i) => `<span class="star ${i < note.rating ? 'active' : ''}">★</span>`).join('')}
                        </div>
                        <button onclick="deleteTastingNote(${note.id})" style="background: #dc2626; color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; margin-top: 1rem;">削除</button>
                    </div>
                `).join('');

            savedNotesContainer.innerHTML = notesHTML;
        }

        function deleteTastingNote(noteId) {
            if (confirm('このテイスティングノートを削除しますか？')) {
                tastingSystem.savedNotes = tastingSystem.savedNotes.filter(note => note.id !== noteId);
                localStorage.setItem('kono_kaffe_tasting_notes', JSON.stringify(tastingSystem.savedNotes));
                displaySavedNotes();
                showTastingAlert('テイスティングノートが削除されました。');
            }
        }

        function showTastingAlert(message) {
            const alert = document.createElement('div');
            alert.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, var(--primary-navy), var(--navy-accent));
                color: white;
                padding: 1.5rem 2rem;
                border-radius: 15px;
                z-index: 10001;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                animation: slideInDown 0.5s ease-out;
                font-family: 'Noto Serif JP', serif;
            `;
            
            alert.innerHTML = `
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <span style="font-size: 1.5rem;">✨</span>
                    <p style="margin: 0; font-weight: 600;">${message}</p>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; margin-left: auto;">×</button>
                </div>
            `;
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                if (alert.parentElement) {
                    alert.remove();
                }
            }, 3000);
        }

        // Add animation CSS
        const tastingAnimationStyles = document.createElement('style');
        tastingAnimationStyles.textContent = `
            @keyframes slideInDown {
                from {
                    transform: translateX(-50%) translateY(-100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(-50%) translateY(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(tastingAnimationStyles);

        // Origin Stories System
        const originSystem = {
            countryData: {
                ethiopia: {
                    name: 'エチオピア',
                    fullName: 'エチオピア イルガチェフェ',
                    altitude: '1,500-2,200m',
                    process: 'ナチュラル・ウォッシュド',
                    region: 'イルガチェフェ',
                    variety: 'エチオピア在来種',
                    harvest: '10月-1月',
                    producer: '小規模農家組合',
                    flavor: 'ベリー、フローラル、明るい酸味',
                    description: 'コーヒー発祥の地。羊飼いカルディの伝説から始まる、世界最古のコーヒー文化を持つ国です。',
                    sustainability: ['オーガニック認証', 'フェアトレード', 'バードフレンドリー']
                },
                colombia: {
                    name: 'コロンビア',
                    fullName: 'コロンビア ウイラ',
                    altitude: '1,200-2,000m',
                    process: 'ウォッシュド',
                    region: 'ウイラ県',
                    variety: 'カツーラ、コロンビア',
                    harvest: '4月-6月、10月-12月',
                    producer: 'ファミリーファーム',
                    flavor: 'チョコレート、キャラメル、バランス',
                    description: 'アンデス山脈の恵まれた自然環境で、家族経営の農園が高品質なコーヒーを生産しています。',
                    sustainability: ['レインフォレスト認証', 'フェアトレード', '女性支援プログラム']
                },
                rwanda: {
                    name: 'ルワンダ',
                    fullName: 'ルワンダ ムサンゼ',
                    altitude: '1,700-2,000m',
                    process: 'ウォッシュド',
                    region: 'ムサンゼ',
                    variety: 'ブルボン',
                    harvest: '3月-7月',
                    producer: '女性生産者協同組合',
                    flavor: '赤いベリー、ローズ、エレガント',
                    description: '千の丘の国。困難を乗り越え、女性生産者が中心となって復活した美しいコーヒー産地。',
                    sustainability: ['オーガニック栽培', 'フェアトレード', 'コミュニティ支援']
                },
                brazil: {
                    name: 'ブラジル',
                    fullName: 'ブラジル セラード',
                    altitude: '800-1,200m',
                    process: 'ナチュラル・ハニー',
                    region: 'セラード',
                    variety: 'ムンドノーボ、カツアイ',
                    harvest: '5月-9月',
                    producer: '大規模農園',
                    flavor: 'ナッツ、チョコレート、まろやか',
                    description: '世界最大のコーヒー生産国。サバンナ気候の広大な農園で機械化された効率的な生産を行います。',
                    sustainability: ['持続可能農業', 'レインフォレスト認証', '品質向上プログラム']
                },
                guatemala: {
                    name: 'グアテマラ',
                    fullName: 'グアテマラ アンティグア',
                    altitude: '1,500-1,700m',
                    process: 'ウォッシュド',
                    region: 'アンティグア',
                    variety: 'ブルボン、カツーラ',
                    harvest: '12月-3月',
                    producer: 'ファミリーファーム',
                    flavor: 'スパイシー、フルボディ、煙味',
                    description: '火山に囲まれた古都アンティグア。火山灰土壌がユニークな煙のような風味を生み出します。',
                    sustainability: ['オーガニック認証', 'フェアトレード', '伝統農法']
                },
                kenya: {
                    name: 'ケニア',
                    fullName: 'ケニア AA',
                    altitude: '1,400-2,000m',
                    process: 'ウォッシュド（ケニア式）',
                    region: 'キリニャガ',
                    variety: 'SL28、SL34',
                    harvest: '10月-12月',
                    producer: '小規模農家協同組合',
                    flavor: 'ブラックカラント、ワイン、強い酸味',
                    description: 'ケニア山の肥沃な土壌で育つ、独特の品種と精製方法により生まれる力強い風味が特徴。',
                    sustainability: ['フェアトレード', '品質向上プログラム', '農家教育支援']
                }
            }
        };

        function initializeOriginSystem() {
            // Initialize map interactions
            const originMarkers = document.querySelectorAll('.origin-marker');
            originMarkers.forEach(marker => {
                marker.addEventListener('click', function() {
                    const country = this.getAttribute('data-country');
                    selectCountry(country);
                });
            });

            // Initialize harvest calendar interactions
            const countryRows = document.querySelectorAll('.country-row');
            countryRows.forEach(row => {
                row.addEventListener('click', function() {
                    const country = this.getAttribute('data-country');
                    if (country) {
                        selectCountry(country);
                        // Scroll to country info
                        document.getElementById('countryInfoDisplay').scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }
                });
            });
        }

        function selectCountry(countryKey) {
            const countryData = originSystem.countryData[countryKey];
            if (!countryData) return;

            // Update active states
            document.querySelectorAll('.origin-marker').forEach(marker => {
                marker.classList.remove('active');
            });
            document.querySelector(`[data-country="${countryKey}"]`).classList.add('active');

            // Update country info display
            const countryInfoDisplay = document.getElementById('countryInfoDisplay');
            countryInfoDisplay.innerHTML = `
                <div class="country-detailed-info">
                    <div class="info-header">
                        <h3>${countryData.fullName}</h3>
                        <div class="country-quick-stats">
                            <span class="stat-item">🏔️ ${countryData.altitude}</span>
                            <span class="stat-item">⚗️ ${countryData.process}</span>
                            <span class="stat-item">📅 ${countryData.harvest}</span>
                        </div>
                    </div>
                    
                    <div class="info-content">
                        <div class="info-section">
                            <strong>特徴的な風味:</strong>
                            <span>${countryData.flavor}</span>
                        </div>
                        <div class="info-section">
                            <strong>産地の特色:</strong>
                            <span>${countryData.description}</span>
                        </div>
                        <div class="info-section">
                            <strong>持続可能性:</strong>
                            <div class="mini-sustainability-tags">
                                ${countryData.sustainability.map(tag => `<span class="mini-tag">${tag}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-actions">
                        <button onclick="scrollToStory('${countryKey}')" class="view-story-btn">詳細ストーリーを見る</button>
                        <button onclick="scrollToProducts()" class="view-products-btn">商品を見る</button>
                    </div>
                </div>
            `;

            // Add animation
            countryInfoDisplay.style.animation = 'fadeInUp 0.6s ease-out';
            setTimeout(() => {
                countryInfoDisplay.style.animation = '';
            }, 600);
        }

        function scrollToStory(countryKey) {
            const storyElement = document.querySelector(`[data-country="${countryKey}"].origin-story`);
            if (storyElement) {
                storyElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Add highlight effect
                storyElement.style.background = 'rgba(255, 255, 255, 0.12)';
                setTimeout(() => {
                    storyElement.style.background = 'rgba(255, 255, 255, 0.05)';
                }, 2000);
            }
        }

        function scrollToProducts() {
            document.getElementById('coffee').scrollIntoView({ behavior: 'smooth' });
        }

        // Add dynamic CSS for country info display
        const originAnimationStyles = document.createElement('style');
        originAnimationStyles.textContent = `
            .country-detailed-info {
                text-align: left;
                width: 100%;
            }
            
            .info-header h3 {
                color: var(--primary-navy);
                font-size: 1.8rem;
                margin-bottom: 1rem;
                font-family: 'Playfair Display', serif;
            }
            
            .country-quick-stats {
                display: flex;
                gap: 1rem;
                flex-wrap: wrap;
                margin-bottom: 1.5rem;
            }
            
            .stat-item {
                background: var(--navy-accent);
                color: var(--white);
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: 500;
            }
            
            .info-content {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                margin-bottom: 2rem;
            }
            
            .info-section {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .info-section strong {
                color: var(--primary-navy);
                font-weight: 600;
            }
            
            .mini-sustainability-tags {
                display: flex;
                gap: 0.5rem;
                flex-wrap: wrap;
            }
            
            .mini-tag {
                background: linear-gradient(135deg, var(--navy-accent), var(--primary-navy));
                color: var(--white);
                padding: 0.3rem 0.8rem;
                border-radius: 15px;
                font-size: 0.8rem;
                font-weight: 500;
            }
            
            .info-actions {
                display: flex;
                gap: 1rem;
                justify-content: center;
            }
            
            .view-story-btn, .view-products-btn {
                padding: 1rem 2rem;
                border: none;
                border-radius: 25px;
                font-family: 'Noto Serif JP', serif;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 0.9rem;
            }
            
            .view-story-btn {
                background: linear-gradient(45deg, var(--primary-navy), var(--navy-accent));
                color: var(--white);
            }
            
            .view-story-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(15, 23, 42, 0.3);
            }
            
            .view-products-btn {
                background: var(--white);
                color: var(--primary-navy);
                border: 2px solid var(--primary-navy);
            }
            
            .view-products-btn:hover {
                background: var(--primary-navy);
                color: var(--white);
                transform: translateY(-2px);
            }
            
            @media (max-width: 768px) {
                .country-quick-stats {
                    flex-direction: column;
                }
                
                .info-actions {
                    flex-direction: column;
                }
            }
        `;
        document.head.appendChild(originAnimationStyles);

        // Mobile menu toggle functionality
        function toggleMobileMenu() {
            const menuToggle = document.getElementById('menuToggle');
            const mobileNav = document.getElementById('mobileNav');
            
            menuToggle.classList.toggle('active');
            mobileNav.classList.toggle('active');
        }

        function closeMobileMenu() {
            const menuToggle = document.getElementById('menuToggle');
            const mobileNav = document.getElementById('mobileNav');
            
            menuToggle.classList.remove('active');
            mobileNav.classList.remove('active');
        }

        // Initialize mobile menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menuToggle');
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleMobileMenu);
            }

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                const menuToggle = document.getElementById('menuToggle');
                const mobileNav = document.getElementById('mobileNav');
                
                if (menuToggle && mobileNav && 
                    !menuToggle.contains(e.target) && 
                    !mobileNav.contains(e.target)) {
                    closeMobileMenu();
                }
            });

            // Close mobile menu on window resize (optional)
            // window.addEventListener('resize', function() {
            //     if (window.innerWidth > 768) {
            //         closeMobileMenu();
            //     }
            // });
        });

        // Initialize product details when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize tasting system
            initializeTastingSystem();
            
            // Initialize origin system
            initializeOriginSystem();
            
            // Product details are already initialized
        });
    </script>
</body>
</html>